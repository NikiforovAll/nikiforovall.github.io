<div class="page-header">
	<h1>{{ page.title }} {% if page.tagline %}<small>{{page.tagline}}</small>{% endif %}</h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			{% assign d = page.date | date: "%d" | plus:'0' %}
			{{ page.date | date: "%B" }}
			{% case d %}
			{% when 1 or 21 or 31 %}{{ d }}st,
			{% when 2 or 22 %}{{ d }}nd,
			{% when 3 or 23 %}{{ d }}rd,
			{% else %}{{ d }}th,
			{% endcase %}
			{{ page.date | date: "%Y" }}
		</span>

	{% if page.related %}
	{% assign maxRelated = 4 %}
	{% assign minCommonTags =  3 %}
	{% assign maxRelatedCounter = 0 %}

	{% for post in site.posts %}

	{% assign sameTagCount = 0 %}
	{% assign commonTags = '' %}

	{% for tag in post.tags %}
	{% if post.url != page.url %}
	{% if page.tags contains tag %}
	{% assign sameTagCount = sameTagCount | plus: 1 %}
	{% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
	{% assign commonTags = commonTags | append: tagmarkup %}
	{% endif %}
	{% endif %}
	{% endfor %}

	{% if sameTagCount >= minCommonTags %}
	<div>
		<h5><a href="{{ post.url | relative_url }}">{{ post.title }}{{ commonTags }}</a></h5>
	</div>
	{% assign maxRelatedCounter = maxRelatedCounter | plus: 1 %}
	{% if maxRelatedCounter >= maxRelated %}
	{% break %}
	{% endif %}
	{% endif %}

	{% endfor %}
	{% endif %}

	<div class="article_body" style="margin-top: 30px;">
		{{ content }}
	</div>

	{% if page["link-list"] %}
	<h3 style="margin-top: 30px;">Reference</h3>
	<a href="{{ page["link-list"] }}" target="_blank">{{ page["link-list"] }}</a>
	<div class="col-sm-12" style="margin-bottom: 30px;"></div>
	{% endif %}

	{% if page.categories != empty or page.tags != empty %}
	<ul class="list-inline">
		<li><i class="fa-solid fa-bookmark"></i> Topics:</li>
		{% assign categories_list = page.categories %}
		{% if categories_list.first[0] == null %}
		{% for category in categories_list %}
		<li>
			<a href="{{ site.topics_path | relative_url }}#{{ category }}-cat-ref">
				{{ category | join: "/" }} <span>({{ site.categories[category].size }})</span>
			</a>
			{% if forloop.last == false or page.tags != empty %} &middot;{% endif %}
		</li>
		{% endfor %}
		{% else %}
		{% for category in categories_list %}
		<li>
			<a href="{{ site.topics_path | relative_url }}#{{ category[0] }}-cat-ref">
				{{ category[0] | join: "/" }} <span>({{ category[1].size }})</span>
			</a>
			{% if forloop.last == false or page.tags != empty %} &middot;{% endif %}
		</li>
		{% endfor %}
		{% endif %}
		{% assign tags_list = page.tags %}
		{% if tags_list.first[0] == null %}
		{% for tag in tags_list %}
		<li>
			<a href="{{ site.topics_path | relative_url }}#{{ tag }}-tag-ref">
				{{ tag }} <span>({{ site.tags[tag].size }})</span>
			</a>
			{% unless forloop.last %} &middot;{% endunless %}
		</li>
		{% endfor %}
		{% else %}
		{% for tag in tags_list %}
		<li>
			<a href="{{ site.topics_path | relative_url }}#{{ tag[0] }}-tag-ref">
				{{ tag[0] }} <span>({{ tag[1].size }})</span>
			</a>
			{% unless forloop.last %} &middot;{% endunless %}
		</li>
		{% endfor %}
		{% endif %}
		{% assign tags_list = nil %}
	</ul>
	{% endif %}

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter"
				href="http://x.com/share?{% if site.author.twitter%}&via={{site.author.twitter}}{% endif %}"
				onclick="window.open(this.href, 'x-share', 'width=550,height=235');return false;">
				<i class="fa-brands fa-x-twitter fa-lg"></i>
				X
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/{{site.author.email_md5}}" class="img-rounded author-image" />
			<h4 class="section-title author-name">{{site.author.name}}</h4>
			<p class="author-bio">{{site.author.bio}}</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		{% if page.previous %}
		<li class="previous"><a href="{{ page.previous.url | relative_url }}" title="{{ page.previous.title }}">&larr;
				Previous</a></li>
		{% else %}
		<li class="previous disabled"><a>&larr; Previous</a></li>
		{% endif %}
		{% if page.next %}
		<li class="next"><a href="{{ page.next.url | relative_url }}" title="{{ page.next.title }}">Next &rarr;</a>
		</li>
		{% else %}
		<li class="next disabled"><a>Next &rarr;</a>
			{% endif %}
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>
