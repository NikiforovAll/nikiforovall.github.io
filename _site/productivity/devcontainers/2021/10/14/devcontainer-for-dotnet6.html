<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- <meta http-equiv="Content-Security-Policy" content="frame-src https://try.dot.net;"> -->
	<title>Try out .NET 6 inside your own development environment built with devcontainers, docker, and vscode</title>
	
	<meta name="author" content="Oleksii Nikiforov">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="https://nikiforovall.github.io/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="https://nikiforovall.github.io/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="https://nikiforovall.github.io/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/nikiforovall">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="https://nikiforovall.github.io/">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle" />
				n+1 IT blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="https://nikiforovall.github.io/">Home</a></li>
				<li><a href="https://nikiforovall.github.io/categories.html">Categories</a></li>
				<li><a href="https://nikiforovall.github.io/tags.html">Tags</a></li>
				<li><a href="https://nikiforovall.github.io/about.html">About</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="https://nikiforovall.github.io/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="https://nikiforovall.github.io/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="https://nikiforovall.github.io/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li><a href="https://nikiforovall.github.io/about.html"><i class="fa fa-pencil"></i>About</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="https://nikiforovall.github.io/">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle" />
	</a>
	<h3 class="title">
        <a href="https://nikiforovall.github.io/">n+1 IT blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/nikiforovall">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="https://nikiforovall.github.io/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Try out .NET 6 inside your own development environment built with devcontainers, docker, and vscode </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			October
			14th,
			
			2021
		</span>

	



	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/productivity/2019/11/30/nikiforovall-setup.html">Development environment based on Windows Terminal + WSL + ZSH + dotfiles <span class="label label-default">git</span>  <span class="label label-default">dotfiles</span>  <span class="label label-default">wsl</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	<div class="article_body" style="margin-top: 30px;">
		<h2 id="tldr">TL;DR</h2>

<p>In this blog post, I provide an example of how to organize/dockerize your personal development setup. Also, you may want to use one of my devcontainers to try .NET 6. Everything is baked inside the devcontainer, so you don‚Äôt have to install SDK and other tooling on your host machine.</p>

<hr />

<h2 id="introduction">Introduction</h2>

<p>As you may know, .NET 6 Release Candidate 2 has been <a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-6-rc-2/">announced</a> and it is very close to the final build of .NET 6 that will be shipped in November this year in time for <a href="https://dotnetconf.net/">.NET Conf 2021</a>. It is the perfect time to start playing with .NET 6 and C# 10 and all of its goodness.</p>

<p>This is why I‚Äôve created sandbox <a href="https://github.com/NikiforovAll/devcontainer-for-dotnet6-demo">https://github.com/NikiforovAll/devcontainer-for-dotnet6-demo</a>. This is <code class="highlighter-rouge">dotnet new webapi -minimal</code> packed inside devcontainer. So, all you need to do is to get the source code and compile the devcontainer. You can do it by downloading via VSCode URL launcher or clone via git. I suggest you go straight to <a href="https://code.visualstudio.com/docs/remote/create-dev-container">documentation</a> for more details. My goal is to share my experience using devcontainers.</p>

<p>Here is how I do it:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/NikiforovAll/devcontainer-for-dotnet6-demo

devcontainer open ./devcontainer-for-dotnet6-demo
</code></pre></div></div>

<p>üí° Tip: You can open repository in VSCode <code class="highlighter-rouge">code ./devcontainer-for-dotnet6-demo</code> and after that, you will be prompted with a suggestion to reopen workspace in devcontainer (<a href="https://code.visualstudio.com/docs/remote/devcontainer-cli#_opening-a-folder-directly-within-a-dev-container">https://code.visualstudio.com/docs/remote/devcontainer-cli#_opening-a-folder-directly-within-a-dev-container</a>).</p>

<p>üöÄ Run <code class="highlighter-rouge">dotnet run --project ./src/App/</code> and enjoy your coding.</p>

<h2 id="anatomy-of-devcontainers">Anatomy of devcontainers</h2>

<p>When you generate configuration from VSCode, by default, it generates something like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>tree <span class="nt">-a</span> 
<span class="nb">.</span>
‚îî‚îÄ‚îÄ .devcontainer
    ‚îú‚îÄ‚îÄ devcontainer.json
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îî‚îÄ‚îÄ library-scripts
        ‚îî‚îÄ‚îÄ azcli-debian.sh
</code></pre></div></div>

<pre><code class="language-Dockerfile"># Dockerfile

ARG VARIANT="5.0"
FROM mcr.microsoft.com/vscode/devcontainers/dotnet:0-${VARIANT}
</code></pre>

<pre><code class="language-jsonc">// .devcontainer/devcontainer.json

// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.202.3/containers/dotnet
{
    "name": "",
    "build": {
        "dockerfile": "Dockerfile",
        "args": { 
            // Update 'VARIANT' to pick a .NET Core version: 2.1, 3.1, 5.0
            "VARIANT": "5.0"
        }
    },
    // Set *default* container specific settings.json values on container create.
    "settings": {},
    // Add the IDs of extensions you want installed when the container is created.
    "extensions": [
    ],
    "remoteUser": "vscode"
}
</code></pre>

<p>A <em>devcontainer.json</em> file in your project tells VS Code how to access (or create) a development container with a well-defined tool and runtime stack. This container can be used to run an application or to separate tools, libraries, or runtimes needed for working with a codebase.</p>

<p>Everything you need is already added in the base docker image, but it is quite easy to extend it. You may want to pre-install some dependencies and tools in a custom Dockerfile.</p>

<p>üí°Tip: You are not limited to using devcontainers for .NET 6 project, actually, you can use them pretty much for everything. For example, I‚Äôm writing this blog post from devcontainer üôÇ.</p>

<h2 id="distribute-devcontainers">Distribute devcontainers</h2>

<p>Personally, I think it should be possible to easily explore the content of the devcontainer in order to change it on demand. This is why my go-to option is to create custom-tailored containers for each project based on some lightweight base images with shared tooling installed in them. For example, you might want to install something like: <a href="https://github.com/rothgar/awesome-tuis">https://github.com/rothgar/awesome-tuis</a>, <a href="https://github.com/unixorn/git-extra-commands">https://github.com/unixorn/git-extra-commands</a>, <a href="https://github.com/junegunn/fzf">https://github.com/junegunn/fzf</a>, <a href="https://github.com/sharkdp/fd">https://github.com/sharkdp/fd</a>, <a href="https://github.com/ogham/exa">https://github.com/ogham/exa</a>, etc. ü§ì</p>

<p>Here you can find my devcontainer for .NET:</p>

<ul>
  <li>Source: <a href="https://github.com/NikiforovAll/dev-containers/tree/master/containers/dotnet">https://github.com/NikiforovAll/dev-containers/tree/master/containers/dotnet</a></li>
  <li>GitHub Container Registry <a href="https://github.com/NikiforovAll/dev-containers/pkgs/container/devcontainers%2Fdotnet">https://github.com/NikiforovAll/dev-containers/pkgs/container/devcontainers%2Fdotnet</a></li>
  <li>Docker Hub <a href="https://hub.docker.com/repository/docker/nikiforovall/devcontainers-dotnet">https://hub.docker.com/repository/docker/nikiforovall/devcontainers-dotnet</a></li>
</ul>

<p>After that, you can install it directly from docker container registry by specifying ‚Äúimage‚Äù field inside <code class="highlighter-rouge">devcontainer.json</code>.</p>

<p>Minimum devcontainer looks like this:</p>

<pre><code class="language-jsonc">{
    "name": ".NET 6 devcontainer",
    "image": "nikiforovall/devcontainers-dotnet:latest",
    "settings": {},
    "extensions": []
}
</code></pre>

<h2 id="dotfiles">Dotfiles</h2>

<p>You can also include your <code class="highlighter-rouge">dotfiles</code> repository to replicate your terminal experience (configurations, aliases, customizations, tools, etc.). See user settings for the ‚ÄúRemote - Containers‚Äù extension.</p>

<p>Basically, you want to configure the remote git repository as the source of <code class="highlighter-rouge">dotfiles</code> and tell vscode what to do upon installation. Here is my <code class="highlighter-rouge">dotfile</code> for devcontainers: <a href="https://github.com/NikiforovAll/dotfiles/blob/master/src/dev-container/boot/install.sh">https://github.com/NikiforovAll/dotfiles/blob/master/src/dev-container/boot/install.sh</a>.</p>

<pre><code class="language-jsonc">"settings": {
    "dotfiles.installCommand": "",
    "remote.containers.dotfiles.repository": "https://github.com/NikiforovAll/dotfiles.git",
    "remote.containers.dotfiles.installCommand": "~/dotfiles/src/dev-container/boot/install.sh",
    "remote.containers.dotfiles.targetPath": "~/dotfiles",
},
</code></pre>

<h3 id="anatomy---summary">Anatomy - Summary</h3>

<table class="table table-sm table-responsive table-striped table-hover">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Description</th>
      <th scope="col">Responsibility</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>.devconatiner/devcontainer.json</code></td>
      <td>Workspace definition.</td>
      <td> Specify how to assemble devcontainer. Customize IDE (vscode) behavior.</td>
    </tr>
    <tr>
      <td><code>.devconatiner/Dockerfile</code></td>
      <td>Image for docker container.</td>
      <td>Install dependencies and tools. Configure defaults.</td>
    </tr>
    <tr>
      <td><code>dotfiles</code></td>
      <td>External versioned source of configuration for developer environment.</td>
      <td>Customize the way your terminal looks and feels and developer experience in general.</td>
    </tr>
  </tbody>
</table>

<h2 id="summary">Summary</h2>

<p>I‚Äôve explained to you the main building blocks of devcontainers and shared some ideas regarding how you may want to organize your development setup. Hope you find it useful.</p>

<hr />

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="https://github.com/NikiforovAll/devcontainer-for-dotnet6-demo">https://github.com/NikiforovAll/devcontainer-for-dotnet6-demo</a></li>
  <li><a href="https://nikiforovall.github.io/docker/2020/09/19/publish-package-to-ghcr.html">https://nikiforovall.github.io/docker/2020/09/19/publish-package-to-ghcr.html</a></li>
  <li><a href="https://nikiforovall.github.io/productivity/2019/11/30/nikiforovall-setup.html">https://nikiforovall.github.io/productivity/2019/11/30/nikiforovall-setup.html</a></li>
  <li><a href="https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-6-rc-2/">https://devblogs.microsoft.com/aspnet/asp-net-core-updates-in-net-6-rc-2/</a></li>
  <li><a href="https://code.visualstudio.com/docs/remote/create-dev-container">https://code.visualstudio.com/docs/remote/create-dev-container</a></li>
  <li><a href="https://code.visualstudio.com/docs/remote/devcontainer-cli">https://code.visualstudio.com/docs/remote/devcontainer-cli</a></li>
</ul>

	</div>

	

	
	<ul class="tag_box list-unstyled list-inline">
		<li><i class="fa fa-folder-open"></i></li>
		
		
		
		<li><a href="https://nikiforovall.github.io/categories.html#productivity-ref">
				productivity <span>(4)</span>
				,
			</a></li>
		
		<li><a href="https://nikiforovall.github.io/categories.html#devcontainers-ref">
				devcontainers <span>(1)</span>
				
			</a></li>
		
		
	</ul>
	

	
	<ul class="list-inline">
		<li><i class="fa fa-tags"></i></li>
		
		
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#dotnet-ref">
				dotnet <span>(16)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#docker-ref">
				docker <span>(3)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#dotfiles-ref">
				dotfiles <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#git-ref">
				git <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#wsl-ref">
				wsl <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#vscode-ref">
				vscode <span>(2)</span>
				
			</a>
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter"
				href="http://twitter.com/share?text=Try out .NET 6 inside your own development environment built with devcontainers, docker, and vscode&via=nikiforovall"
				onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
				<i class="fa fa-twitter fa-lg"></i>
				Twitter
			</a>
			<a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
				onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
				<i class="fa fa-facebook fa-lg"></i>
				Facebook
			</a>
			<a class="btn btn-default btn-sm gplus"
				onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
				<i class="fa fa-google-plus fa-lg"></i>
				Google+
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image" />
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="https://nikiforovall.github.io/dotnet/aspnetcore/2021/09/10/opinionated-minimal-api.html" title="An opinionated look at Minimal API in .NET 6">&larr;
				Previous</a></li>
		
		
		<li class="next"><a href="https://nikiforovall.github.io/dotnet/csharp/coding-stories/2021/10/29/whats-new-in-dotnet6.html" title="What's new in .NET 6 and C# 10. Everything you wanted to know.">Next &rarr;</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    

<div id="disqus_thread"></div>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'nikiforovall';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>





		<footer>
			<hr/>
			<p>
				&copy; 2021 Oleksii Nikiforov with <a href="http://jekyllrb.com/">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/js/app.js"></script>
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

