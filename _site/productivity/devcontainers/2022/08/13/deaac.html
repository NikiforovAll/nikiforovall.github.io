<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- <meta http-equiv="Content-Security-Policy" content="frame-src https://try.dot.net;"> -->
	<title>Dev Environment as a Code (DEaaC) with DevContainers, Dotfiles, and GitHub Codespaces</title>
	
	<meta name="author" content="Oleksii Nikiforov">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="https://nikiforovall.github.io/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="https://nikiforovall.github.io/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/nikiforovall" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle">
				N+1 Blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">Home</a></li>
				<li><a href="https://nikiforovall.github.io/categories.html" target="_blank" rel="noopener noreferrer">Categories</a></li>
				<li><a href="https://nikiforovall.github.io/tags.html" target="_blank" rel="noopener noreferrer">Tags</a></li>
				<li><a href="https://nikiforovall.github.io/about.html" target="_blank" rel="noopener noreferrer">About</a></li>
			</ul>
		</div>
<!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="https://nikiforovall.github.io/categories.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="https://nikiforovall.github.io/tags.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-tags"></i>Tags</a></li>
			<li><a href="https://nikiforovall.github.io/about.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-pencil"></i>About</a></li>
			<li class="divider">
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle">
	</a>
	<h3 class="title">
        <a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">N+1 Blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/nikiforovall" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://t.me/nikiforovallblog" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-pencil-square fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="https://nikiforovall.github.io/feed.xml" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Dev Environment as a Code (DEaaC) with DevContainers, Dotfiles, and GitHub Codespaces </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			August
			13th,
			
			2022
		</span>

	
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/productivity/devcontainers/2021/10/14/devcontainer-for-dotnet6.html">Try out .NET 6 inside your own development environment built with devcontainers, docker, and vscode <span class="label label-default">dotfiles</span>  <span class="label label-default">deaac</span>  <span class="label label-default">devcontainers</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/productivity/2019/11/30/nikiforovall-setup.html">Development environment based on Windows Terminal + WSL + ZSH + dotfiles <span class="label label-default">zsh</span>  <span class="label label-default">dotfiles</span>  <span class="label label-default">deaac</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	
	

	<div class="article_body" style="margin-top: 30px;">
		<h3>Table of Contents</h3>

<ul>
  <li><a href="#motivation">Motivation</a></li>
  <li>
<a href="#anatomy-of-a-dev-environment">Anatomy of a dev environment</a>
    <ul>
      <li><a href="#dotfiles">Dotfiles</a></li>
      <li><a href="#devcontainers">DevContainers</a></li>
    </ul>
  </li>
  <li><a href="#a-better-way-to-do-dotfiles---dotbot">A better way to do dotfiles - Dotbot</a></li>
  <li><a href="#combining-everything-together">Combining everything together</a></li>
  <li><a href="#pick-a-host-github-codespaces">Pick a host. GitHub Codespaces</a></li>
  <li><a href="#example">Example</a></li>
  <li><a href="#summary">Summary</a></li>
  <li><a href="#reference">Reference</a></li>
</ul>

<h2 id="motivation">Motivation</h2>

<p>Crafting a perfect dev environment takes time and effort. It is a tedious process that you have to do every time you change a working environment. For example, you buy a new laptop, switch to another operating system, or switch to a new project that requires extra tools and configuration. The latter case is interesting to me because I like to try out new things. Varying from different tools, and frameworks to new programming languages.</p>

<p>There are lots of benefits to making a reproducible dev environment. For me the two main ones:</p>

<ol>
  <li>You open a project and it just works. Image some open-source project that interests you but you donâ€™t know how to even run it. With DEaaC the installation problems go away.</li>
  <li>You can share it with your peers. A codified developer setup is a form of knowledge that could be evaluated and evolved. It opens up tons of new opportunities.</li>
</ol>

<h2 id="anatomy-of-a-dev-environment">Anatomy of a dev environment</h2>

<p>Basically, you can divide aspects of a dev environment into next categories:</p>

<div class="mermaid">
graph LR
    dev[DevEnv]
    dev--&gt;personal[Personal]
    personal --&gt; pconfig[Configuration]
    pconfig --&gt; shellconfig[Shell: aliases, prompts,...]
    pconfig --&gt; editorconfig[Editor: extensions, customizations]
    pconfig --&gt; gitconfig[Git]
    personal--&gt;ptools[Tools]
    ptools --&gt;pcli[command-line tools]
    ptools --&gt;pgui[Graphical User Interface]
    dev--&gt;project[Project]
    project--&gt;pjconfig[Configuration]
    project--&gt;projecttools[Tools]
    pjconfig -.-&gt; pjshellconfig[Shell: aliases, prompts,...]
    pjconfig --&gt; pjeditorconfig[Editor: extensions, customizations]
    pjconfig -.-&gt; pjgitconfig[Git]
    projecttools --&gt; pjcli[command-line tools]
    projecttools--&gt;pjgui[Graphical User Interface]
    style pjshellconfig stroke:grey,stroke-width:2px,stroke-dasharray: 5 5
    style pjgitconfig stroke:grey,stroke-width:2px,stroke-dasharray: 5 5
</div>

<p>It might seem like a lot but luckily we have good tools to automate the scaffolding process. Namely <strong>dotfiles</strong> and <strong>devcontainers</strong>.</p>

<h3 id="dotfiles">Dotfiles</h3>

<p><a href="https://dotfiles.github.io/" target="_blank" rel="noopener noreferrer">Dotfiles</a> are focused on personal configuration aspects and are usually maintained by a person. Dotfiles are tailored to make up a unique developer experience. Previously, I wrote about it here: <a href="https://nikiforovall.github.io/productivity/2019/11/30/nikiforovall-setup.html" target="_blank" rel="noopener noreferrer">Development environment based on Windows Terminal + WSL + ZSH + dotfiles</a></p>

<p>Usually, dotfiles are comprised of common configurations and utilities that could be used on various different platforms and platform-specific configurations. For example, you use a specific package manager innate into the system to install dependencies.</p>

<p>Here is an example of how I do it: <a href="https://github.com/NikiforovAll/dotfiles" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/dotfiles</a>. As you can see, there are three different setups for <code class="language-plaintext highlighter-rouge">windows</code>, <code class="language-plaintext highlighter-rouge">wsl</code>, and <code class="language-plaintext highlighter-rouge">dev-containers</code>.</p>

<p>As result, we can create a dev environment of choice from a scratch. All you need to do is to run one-liner:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bash <span class="nt">-c</span> <span class="s2">"</span><span class="si">$(</span>wget <span class="nt">-qO</span> - https://raw.github.com/nikiforovall/dotfiles/master/src/wsl/os/install.sh<span class="si">)</span><span class="s2">"</span>
</code></pre></div></div>

<p>An approach like this does work. But it is annoying and impractical. We can do better about it. I will show you in a moment.</p>

<h3 id="devcontainers">DevContainers</h3>

<p>From the official documentation:</p>

<blockquote>
  <p>The Visual Studio Code Remote - Containers extension lets you use a Docker container as a full-featured development environment. It allows you to open any folder or repository inside a container and take advantage of Visual Studio Codeâ€™s full feature set. A devcontainer.json file in your project tells VS Code how to access (or create) a development container with a well-defined tool and runtime stack. This container can be used to run an application or to separate tools, libraries, or runtimes needed for working with a codebase.</p>
</blockquote>

<blockquote>
  <p>A devcontainer.json file in your project tells Visual Studio Code (and other services and tools that support the format) how to access (or create) a development container with a well-defined tool and runtime stack. Itâ€™s currently supported by the <a href="https://aka.ms/vscode-remote/download/containers" target="_blank" rel="noopener noreferrer">Remote - Containers</a> extension and <a href="https://github.com/features/codespaces" target="_blank" rel="noopener noreferrer">GitHub Codespaces</a>.</p>
</blockquote>

<center>
    <img src="/assets/deaac/remote-arch.png" alt="remote-arch">
</center>

<p>DevContainers are meant to be reusable and extendable. From my experience, they have improved in this regard. Here is how you can add dependencies via <code class="language-plaintext highlighter-rouge">.devconatiner.json</code></p>

<div class="language-jsonc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Azure Dev CLI"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"dockerfile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dockerfile"</span><span class="p">,</span><span class="w"> </span><span class="c1">// base docker image</span><span class="w">
        </span><span class="nl">"args"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"VARIANT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bullseye"</span><span class="w"> </span><span class="c1">// parametrization</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"github-cli"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"azure-cli"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.38"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dotnet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6.0"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docker-from-docker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20.10"</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"extensions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"ms-azuretools.azure-dev"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ms-azuretools.vscode-bicep"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ms-azuretools.vscode-docker"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ms-azuretools.vscode-azurefunctions"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ms-dotnettools.csharp"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ms-dotnettools.vscode-dotnet-runtime"</span><span class="p">,</span><span class="w">
    </span><span class="p">],</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>ğŸ’¡DevContainers define project-specific configurations and dotfiles define user-specific configurations.</p>

<h2 id="a-better-way-to-do-dotfiles---dotbot">A better way to do dotfiles - Dotbot</h2>

<p>ğŸ’­ My initial version of dotfiles was intended for wsl &amp; early devcontainers version. Since then, Iâ€™ve learned a couple of lessons. Mainly, it is a good idea to keep dotfiles simple and rely on essentials. You donâ€™t need to bring tons of dependencies and convoluted configuration files. The simpler - the easier to maintain and synchronize.</p>

<p>So, Iâ€™ve created another dotfiles repo: <a href="https://github.com/NikiforovAll/dotbot" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/dotbot</a>. This one is based on <a href="https://github.com/anishathalye/dotbot" target="_blank" rel="noopener noreferrer">https://github.com/anishathalye/dotbot</a>. Dotbot is a tool that bootstraps your dotfiles. It is straightforward and easy to use. I suggest you to give a try on your own.</p>

<p>As discussed, since I deliberately choose to not have heavy dependencies it takes a couple a seconds to install dotfiles. Exactly as I want it to be. My general suggestion is to move the heavy lifting of dependencies installation to DevContainers.</p>

<p>One-liner: <code class="language-plaintext highlighter-rouge">cd ~ &amp;&amp; git clone https://github.com/NikiforovAll/dotbot &amp;&amp; cd ./dotbot &amp;&amp; cd ./install</code></p>

<p>Here is how the project structure looks like:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># oleksii_nikiforov in ~/dotbot</span>
<span class="o">&gt;</span> tree <span class="nt">-L</span> 2
<span class="nb">.</span>
â”œâ”€â”€ bash
â”‚Â Â  â”œâ”€â”€ plugins.bash
â”‚Â Â  â””â”€â”€ prompt.bash
â”œâ”€â”€ bash_profile
â”œâ”€â”€ bashrc
â”œâ”€â”€ gitconfig
â”œâ”€â”€ gitignore_global
â”œâ”€â”€ <span class="nb">install</span>
â”œâ”€â”€ install.conf.yaml
â”œâ”€â”€ pre-install.sh
â”œâ”€â”€ shell
â”‚Â Â  â”œâ”€â”€ aliases.sh
â”‚Â Â  â”œâ”€â”€ bootstrap.sh
â”‚Â Â  â”œâ”€â”€ dircolors.extra
â”‚Â Â  â”œâ”€â”€ external.sh
â”‚Â Â  â”œâ”€â”€ functions.sh
â”‚Â Â  â””â”€â”€ plugins
â”œâ”€â”€ zsh
â”‚Â Â  â”œâ”€â”€ plugins
â”‚Â Â  â”œâ”€â”€ plugins_after.zsh
â”‚Â Â  â”œâ”€â”€ plugins_before.zsh
â”‚Â Â  â”œâ”€â”€ prompt.zsh
â”‚Â Â  â””â”€â”€ settings.zsh
â””â”€â”€ zshrc
</code></pre></div></div>

<h2 id="combining-everything-together">Combining everything together</h2>

<p>The resulting dev environment is combined from diverse sources. Roughly speaking a host (developer machine/codespace) is composed of the next pieces:</p>

<div class="mermaid">
flowchart
    subgraph host[ ]
        direction LR
        subgraph dotfiles[Dotfiles]
            direction LR
            shellconfig[Shell]

            shellconfig--&gt;aliases
            shellconfig--&gt;prompts
            shellconfig--&gt;scripts
            shellconfig--&gt;tools

            editorconfig[VSCode]
            editorconfig--&gt;extensions
            editorconfig--&gt;customizations[user settings]

            gitconfig[Git]--&gt;preferences
            gitconfig[Git]--&gt;galiases[aliases]
        end
        subgraph devconataners[DevContainers]
            direction LR
            projecttools[Tools]
            projecttools--&gt;dockerimage[dockerfile]
            projecttools--&gt;devcontainerfeatures[devcontainer.json features]
            projecttools--&gt;postcreatecommand[postCreateCommand]
            pjeditorconfig[VSCode]
            pjeditorconfig--&gt;pjextensions[extensions]
            pjeditorconfig--&gt;pjcustomization[workspaces settings]
        end
        
        tools-.-&gt;projecttools
        extensions-.-&gt;pjextensions
        customizations-.-&gt;pjcustomization
        vscodesettingssync(VSCode settings Sync)--&gt;editorconfig
        gitcredentials(Git Credentials)--&gt;gitconfig
    end
    style host fill:#e6eced,stroke:grey,stroke-width:2px,stroke-dasharray: 5 5
    style dotfiles fill:#def4ea
    style devconataners fill:#dee9f4
</div>

<h2 id="pick-a-host-github-codespaces">Pick a host. GitHub Codespaces</h2>

<p>The suggested approach abstracts away the host. It doesnâ€™t necessarily has to be your own machine. This is what â€œGitHub Codespacesâ€ product is about.</p>

<blockquote>
  <p>A codespace is a development environment thatâ€™s hosted in the cloud. You can customize your project for GitHub Codespaces by committing <a href="https://docs.github.com/en/codespaces/customizing-your-codespace/configuring-codespaces-for-your-project" target="_blank" rel="noopener noreferrer">configuration files</a> to your repository (often known as Configuration-as-Code), which creates a repeatable codespace configuration for all users of your project.</p>
</blockquote>

<blockquote>
  <p>GitHub Codespaces run on a variety of VM-based compute options hosted by GitHub.com, which you can configure from 2 core machines up to 32 core machines. You can connect to your codespaces from the browser or locally using Visual Studio Code.</p>
</blockquote>

<center>
    <img src="/assets/deaac/codespaces-diagram.png" alt="codespaces-diagram">
</center>

<h2 id="example">Example</h2>

<p>We will examine Azure Developer CLI (<code class="language-plaintext highlighter-rouge">azd</code>) template - <em>todo-csharp-cosmos-sql</em>. Here is a repo that will be used as an example: <a href="https://github.com/NikiforovAll/todo-csharp-cosmos-sql" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/todo-csharp-cosmos-sql</a>.</p>

<p>The end goal is to setup a full-featured dev environment and measure how much time it takes.</p>

<p>This application utilizes the following Azure resources:</p>

<ul>
  <li>
<strong>Azure App Services</strong> to host the Web frontend and API backend</li>
  <li>
<strong>Azure Cosmos DB SQL API</strong> for storage</li>
  <li>
<strong>Azure Monitor</strong> for monitoring and logging</li>
  <li>
<strong>Azure Key Vault</strong> for securing secrets</li>
</ul>

<p>The demo combines techniquest from both Infrastructure as a Code (IaaC) and Dev Environment as a Code (DEaaC). It takes only <strong>15</strong> stagering minutes from zero to deployed azure resources on the first launch.</p>

<p>1ï¸âƒ£ Configure dotfiles in â€œSettings&gt;Codespacesâ€:</p>

<p><img src="/assets/deaac/configure-dotfiles.png" alt="configure-dotfiles"></p>

<p>2ï¸âƒ£ Go to repository and launch a codespace:</p>

<p><img src="/assets/deaac/launch-codespace.png" alt="launch-codespace"></p>

<p>3ï¸âƒ£ Open the codespace in the browser or locally (I will go with browser option for the demo)</p>

<p><img src="/assets/deaac/codespace-welcome.png" alt="codespace-welcome"></p>

<p>4ï¸âƒ£ Login to Azure via CLI or VSCode extension:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az login --use-device-code
</code></pre></div></div>

<p>5ï¸âƒ£ Run <code class="language-plaintext highlighter-rouge">azd up</code></p>

<p><img src="/assets/deaac/azd-up.png" alt="azd-up"></p>

<p>6ï¸âƒ£ Setup the breakpoint</p>

<p><img src="/assets/deaac/debug-in-codespace.png" alt="debug-in-codespace"></p>

<p>7ï¸âƒ£ Inspect forwarded ports. Note, codespaces allocates some random URL</p>

<p><img src="/assets/deaac/port-forwarding-panel.png" alt="port-forwarding-panel"></p>

<p>8ï¸âƒ£ Generate load</p>

<p><img src="/assets/deaac/forwarded-port.png" alt="forwarded-port"></p>

<p>9ï¸âƒ£ Inspect logs by running <code class="language-plaintext highlighter-rouge">azd monitor --logs</code></p>

<p>ğŸ”Ÿ Tear down the dev environment in Azure <code class="language-plaintext highlighter-rouge">azd down</code></p>

<p><img src="/assets/deaac/azd-down.png" alt="azd-down"></p>

<p>As result we have:</p>

<ul>
  <li>Deployed whole developer setup in <strong>15</strong> minutes</li>
  <li>Terminal/Shell is configured</li>
  <li>Git is configured</li>
  <li>All project tooling and dependencies are installed: <code class="language-plaintext highlighter-rouge">dotnet</code>, <code class="language-plaintext highlighter-rouge">az</code>, etc.</li>
  <li>VSCode contains user extensions as well as suggested by devcontainer</li>
  <li>A one happy developer ğŸ˜‰</li>
</ul>

<h2 id="summary">Summary</h2>

<p>DEaaS has lots of advantages. Most of the time it just works. But it definitely required investing some time to learn about the moving parts to know how to maintain and troubleshoot the setup. I have not shown you the dark side of using DevContainers but I can assure you that it could be hard to understand when something goes wrong. Despite all challenges, it opens new horizons and it is a future of large-scale and open-source development.</p>

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="https://dotfiles.github.io" target="_blank" rel="noopener noreferrer">https://dotfiles.github.io</a></li>
  <li><a href="https://nikiforovall.github.io/productivity/2019/11/30/nikiforovall-setup.html" target="_blank" rel="noopener noreferrer">https://nikiforovall.github.io/productivity/2019/11/30/nikiforovall-setup.html</a></li>
  <li><a href="https://code.visualstudio.com/docs/remote/create-dev-container" target="_blank" rel="noopener noreferrer">https://code.visualstudio.com/docs/remote/create-dev-container</a></li>
  <li><a href="https://docs.github.com/en/codespaces/overview" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/codespaces/overview</a></li>
  <li><a href="https://docs.github.com/en/codespaces/setting-up-your-project-for-codespaces/introduction-to-dev-containers" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/codespaces/setting-up-your-project-for-codespaces/introduction-to-dev-containers</a></li>
  <li><a href="https://docs.github.com/en/codespaces/customizing-your-codespace/personalizing-github-codespaces-for-your-account" target="_blank" rel="noopener noreferrer">https://docs.github.com/en/codespaces/customizing-your-codespace/personalizing-github-codespaces-for-your-account</a></li>
</ul>

	</div>

	

	
	<ul class="tag_box list-unstyled list-inline">
		<li><i class="fa fa-folder-open"></i></li>
		
		
		
		<li><a href="https://nikiforovall.github.io/categories.html#productivity-ref" target="_blank" rel="noopener noreferrer">
				productivity <span>(5)</span>
				,
			</a></li>
		
		<li><a href="https://nikiforovall.github.io/categories.html#devcontainers-ref" target="_blank" rel="noopener noreferrer">
				devcontainers <span>(2)</span>
				
			</a></li>
		
		
	</ul>
	

	
	<ul class="list-inline">
		<li><i class="fa fa-tags"></i></li>
		
		
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#devcontainers-ref" target="_blank" rel="noopener noreferrer">
				devcontainers <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#dotfiles-ref" target="_blank" rel="noopener noreferrer">
				dotfiles <span>(3)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#zsh-ref" target="_blank" rel="noopener noreferrer">
				zsh <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#deaac-ref" target="_blank" rel="noopener noreferrer">
				deaac <span>(3)</span>
				
			</a>
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?&amp;via=nikiforovall" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter fa-lg"></i>
				Twitter
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image">
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="https://nikiforovall.github.io/dotnet/aspnetcore/microservices/2022/04/04/creating-and-using-http-sdks.html" title="Creating and Using HTTP Client SDKs in .NET 6" target="_blank" rel="noopener noreferrer">â†
				Previous</a></li>
		
		
		<li class="next">
<a href="https://nikiforovall.github.io/aspnetcore/dotnet/2022/08/24/dotnet-keycloak-auth.html" title="Use Keycloak as Identity Provider in ASP.NET Core 6" target="_blank" rel="noopener noreferrer">Next â†’</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    
    <script src="https://utteranc.es/client.js" repo="NikiforovAll/nikiforovall.github.io" issue-term="pathname" label="Blog" theme="preferred-color-scheme" crossorigin="anonymous" async>
    </script>





		<footer>
			<hr>
			<p>
				Â© 2024 Oleksii Nikiforov with <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll" target="_blank" rel="noopener noreferrer">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/js/app.js"></script>
	
		<script type="text/javascript" src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js">
</script>
<script>
$(document).ready(function() {
    mermaid.initialize({
        theme: 'forest'
    });
});
</script>

	
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

