<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<!-- <meta http-equiv="Content-Security-Policy" content="frame-src https://try.dot.net;"> -->
	<title>Composable AI with .NET Aspire: Extending DIAL Assistants with Add-Ons</title>
	
	<meta name="author" content="Oleksii Nikiforov">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="https://nikiforovall.github.io/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="https://nikiforovall.github.io/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="https://nikiforovall.github.io/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://twitter.com/nikiforovall" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle">
				N+1 Blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">Home</a></li>
				<li><a href="https://nikiforovall.github.io/categories.html" target="_blank" rel="noopener noreferrer">Categories</a></li>
				<li><a href="https://nikiforovall.github.io/tags.html" target="_blank" rel="noopener noreferrer">Tags</a></li>
				<li><a href="https://nikiforovall.github.io/about.html" target="_blank" rel="noopener noreferrer">About</a></li>
			</ul>
		</div>
<!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="https://nikiforovall.github.io/categories.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="https://nikiforovall.github.io/tags.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-tags"></i>Tags</a></li>
			<li><a href="https://nikiforovall.github.io/about.html" target="_blank" rel="noopener noreferrer"><i class="fa fa-pencil"></i>About</a></li>
			<li class="divider">
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle">
	</a>
	<h3 class="title">
        <a href="https://nikiforovall.github.io/" target="_blank" rel="noopener noreferrer">N+1 Blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/nikiforovall" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://t.me/nikiforovallblog" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-pencil-square fa-lg"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa fa-envelope fa-lg"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-linkedin fa-lg"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="https://nikiforovall.github.io/feed.xml" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Composable AI with .NET Aspire: Extending DIAL Assistants with Add-Ons </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			April
			18th,
			
			2025
		</span>

	
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/ai/2025/03/30/introduction-to-dial.html">Introducing AI DIAL: The Open-Source AI Orchestration Platform <span class="label label-default">ai</span>  <span class="label label-default">aspire</span>  <span class="label label-default">dial</span>  <span class="label label-default">llm-orchestration</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	
	

	<div class="article_body" style="margin-top: 30px;">
		<h2 id="tldr">TL;DR</h2>

<blockquote>
  <p>In this post we will extend <em>AI DIAL</em> with <a href="https://docs.epam-rail.com/tutorials/quick-start-with-addon" target="_blank" rel="noopener noreferrer">Addons</a> using .NET Aspire. We will build a simple TODO Assistant that allows us to manage our TODO list using natural language.</p>
</blockquote>

<p><strong>Source code:</strong> <a href="https://github.com/NikiforovAll/ai-dial-dotnet" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/ai-dial-dotnet</a></p>

<p><strong>Table of Contents</strong>:</p>

<ul>
  <li><a href="#tldr">TL;DR</a></li>
  <li><a href="#introduction">Introduction</a></li>
  <li>
<a href="#build-the-assistant-from-scratch">Build the Assistant from Scratch</a>
    <ul>
      <li><a href="#add-dial-core">Add DIAL Core</a></li>
      <li><a href="#add-assistant-with-addon">Add Assistant with Addon</a></li>
      <li><a href="#deploy-openai-model---gpt-4o">Deploy OpenAI Model - GPT-4o</a></li>
      <li><a href="#run-everything-together">Run Everything Together</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#references">References</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>In my <a href="https://nikiforovall.github.io/dotnet/ai/2025/03/30/introduction-to-dial.html" target="_blank" rel="noopener noreferrer">previous blog post</a>, I‚Äôve introduced you to <strong><a href="https://epam-rail.com/platform" target="_blank" rel="noopener noreferrer">DIAL</a></strong>, an open-source AI orchestration platform.</p>

<p><em>AI DIAL</em> promises to be an extensible platform for building and deploying AI applications. In this post, we will learn how to add <strong>Addons</strong> to <em>AI DIAL</em>. Addons are a powerful way to extend the functionality of your AI applications by integrating with external services or APIs.</p>

<p>The great thing about <em>DIAL Addons</em> is that they are based on <a href="https://platform.openai.com/docs/actions/introduction" target="_blank" rel="noopener noreferrer">OpenAI GPT Actions</a> (aka Plugins). At their core, GPT Actions leverage <a href="https://platform.openai.com/docs/guides/function-calling" target="_blank" rel="noopener noreferrer">Function Calling</a> to execute API calls.</p>

<p>In this blog, we will build a <code class="language-plaintext highlighter-rouge">todo-assistant</code> based on the official <a href="https://github.com/openai/plugins-quickstart/" target="_blank" rel="noopener noreferrer">TODO Assistant</a> from OpenAI. This Addon will allow us to manage our TODO list using natural language commands.</p>

<p>In <em>AI DIAL</em>, conversational agents enable direct interactions between end-users and applications or language models via the <a href="https://docs.epam-rail.com/chat-design" target="_blank" rel="noopener noreferrer">AI DIAL Chat</a> interface or <a href="https://epam-rail.com/dial_api" target="_blank" rel="noopener noreferrer">AI DIAL API</a>.</p>

<h2 id="build-the-assistant-from-scratch">Build the Assistant from Scratch</h2>

<p>Let‚Äôs create empty Aspire AppHost project:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet new aspire-apphost <span class="nt">-n</span> AppHost <span class="nt">-o</span> AppHost 
</code></pre></div></div>

<p>The default <code class="language-plaintext highlighter-rouge">Program.cs</code> looks like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="add-dial-core">Add DIAL Core</h3>

<p>üì¶ Let‚Äôs install Aspire Host integration - <a href="https://www.nuget.org/packages/Nall.EPAM.Dial.Aspire.Hosting" target="_blank" rel="noopener noreferrer">Nall.EPAM.Dial.Aspire.Hosting</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet add package Nall.EPAM.Dial.Aspire.Hosting
</code></pre></div></div>

<p>Now we can add the DIAL hosting to our application. The <code class="language-plaintext highlighter-rouge">Program.cs</code> file should look like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">dial</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddDial</span><span class="p">(</span><span class="s">"dial"</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="m">8080</span><span class="p">).</span><span class="nf">WithChatUI</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="m">3000</span><span class="p">);</span> <span class="c1">// &lt;--Adds DIAL and Chat UI</span>

<span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>üöÄ Now, we can use Aspire cli to run our application:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aspire run <span class="nt">--project</span> AppHost/AppHost.csproj
</code></pre></div></div>

<center>
  <img src="/assets/dial/addon/aspire-cli-1.png" style="margin: 15px;" width="50%">
</center>

<p>Here is the the Aspire Dashboard:</p>

<center>
  <img src="/assets/dial/addon/app-host-1.png" style="margin: 15px;">
</center>

<h3 id="add-assistant-with-addon">Add Assistant with Addon</h3>

<p>Once we deployed the DIAL Core, we can add the Addon. The Addon is a simple HTTP API that will be called by the DIAL Core when it needs to execute an action.</p>

<p>üêã Here is an example of Dockerfile of  ‚ÄúTODO List‚Äù Addon:</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.11-alpine</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="s">builder</span>

<span class="k">RUN </span>apk update <span class="o">&amp;&amp;</span> apk add git
<span class="k">RUN </span>git clone https://github.com/openai/plugins-quickstart.git

<span class="k">FROM</span><span class="s"> python:3.11-alpine</span>
<span class="k">COPY</span><span class="s"> --from=builder /plugins-quickstart /plugins-quickstart</span>

<span class="k">WORKDIR</span><span class="s"> /plugins-quickstart</span>
<span class="k">RUN </span>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt

<span class="k">EXPOSE</span><span class="s"> 5003</span>
<span class="k">CMD</span><span class="s"> ["python", "main.py"]</span>
</code></pre></div></div>

<p>We will run this addon as container using Aspire:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">dial</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddDial</span><span class="p">(</span><span class="s">"dial"</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="m">8080</span><span class="p">).</span><span class="nf">WithChatUI</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="m">3000</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">todoAddonContainer</span> <span class="p">=</span> <span class="n">builder</span>
    <span class="p">.</span><span class="nf">AddDockerfile</span><span class="p">(</span><span class="s">"todo-addon-container"</span><span class="p">,</span> <span class="n">contextPath</span><span class="p">:</span> <span class="s">"addons"</span><span class="p">,</span> <span class="n">dockerfilePath</span><span class="p">:</span> <span class="s">"TodoDockerfile"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithHttpEndpoint</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="k">null</span><span class="p">,</span> <span class="n">targetPort</span><span class="p">:</span> <span class="m">5003</span><span class="p">,</span> <span class="s">"http"</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>Next, we wil register the Addon with the DIAL Core:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">dial</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddDial</span><span class="p">(</span><span class="s">"dial"</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="m">8080</span><span class="p">).</span><span class="nf">WithChatUI</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="m">3000</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">todoAddonContainer</span> <span class="p">=</span> <span class="n">builder</span>
    <span class="p">.</span><span class="nf">AddDockerfile</span><span class="p">(</span><span class="s">"todo-addon-container"</span><span class="p">,</span> <span class="n">contextPath</span><span class="p">:</span> <span class="s">"addons"</span><span class="p">,</span> <span class="n">dockerfilePath</span><span class="p">:</span> <span class="s">"TodoDockerfile"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithHttpEndpoint</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="k">null</span><span class="p">,</span> <span class="n">targetPort</span><span class="p">:</span> <span class="m">5003</span><span class="p">,</span> <span class="s">"http"</span><span class="p">);</span>


<span class="kt">var</span> <span class="n">todoAddon</span> <span class="p">=</span> <span class="n">dial</span><span class="p">.</span><span class="nf">AddAddon</span><span class="p">(</span><span class="s">"todo-addon"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithUpstream</span><span class="p">(</span><span class="n">todoAddonContainer</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"TODO List"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span><span class="s">"Addon that allows to manage user's TODO list."</span><span class="p">);</span>

<span class="n">dial</span><span class="p">.</span><span class="nf">AddAssistantsBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">AddAssistant</span><span class="p">(</span><span class="s">"todo-assistant"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithPrompt</span><span class="p">(</span>
        <span class="s">"You are assistant that helps to manage TODO list for the user. You can add, remove and view your TODOs."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span>
        <span class="s">"The assistant that manages your TODO list. It can add, remove and view your TODOs."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"TODO Assistant"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithAddon</span><span class="p">(</span><span class="n">todoAddon</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>üöÄ Let‚Äôs run the AppHost and see the result:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aspire run <span class="nt">--project</span> AppHost/AppHost.csproj
</code></pre></div></div>

<p>Here is the ouput of the Aspire CLI:</p>

<center>
  <img src="/assets/dial/addon/app-cli-2.png" style="margin: 15px;" width="50%">
</center>

<p>And here is the Aspire Dashboard:</p>

<center>
  <img src="/assets/dial/addon/app-host-2.png" style="margin: 15px;">
</center>

<p>If you open the Chat UI, you will see the TODO Assistant:</p>

<center>
  <img src="/assets/dial/addon/assistant-chat-demo-no-model.png" style="margin: 15px;">
</center>

<p>‚òùÔ∏è But before we can use it, we need to deploy OpenAI model that supports Function Calling.</p>

<p>When you open Chat UI, you will see the following message - ‚ÄúNot available agent selected. Please, change the agent to proceed
‚Äú.</p>

<p>Let‚Äôs fix this one.</p>

<h3 id="deploy-openai-model---gpt-4o">Deploy OpenAI Model - GPT-4o</h3>

<p>üì¶ We will add <a href="https://learn.microsoft.com/en-us/dotnet/aspire/azureai/azureai-openai-integration" target="_blank" rel="noopener noreferrer">Azure OpenAI hosting integration</a> to the AppHost:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet add package Aspire.Hosting.Azure.CognitiveServices
</code></pre></div></div>

<p>Let‚Äôs add model deployment to the AppHost:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">openAIApiKey</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"azure-openai-api-key"</span><span class="p">,</span> <span class="n">secret</span><span class="p">:</span> <span class="k">true</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">openai</span> <span class="p">=</span> <span class="n">builder</span>
    <span class="p">.</span><span class="nf">AddAzureOpenAI</span><span class="p">(</span><span class="s">"openai"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">ConfigureInfrastructure</span><span class="p">(</span><span class="n">infra</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">resources</span> <span class="p">=</span> <span class="n">infra</span><span class="p">.</span><span class="nf">GetProvisionableResources</span><span class="p">();</span>
        <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">CognitiveServicesAccount</span><span class="p">&gt;().</span><span class="nf">Single</span><span class="p">();</span>
        <span class="n">account</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">DisableLocalAuth</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// so we can use api key</span>
    <span class="p">});</span>
<span class="kt">var</span> <span class="n">gpt4o</span> <span class="p">=</span> <span class="n">openai</span><span class="p">.</span><span class="nf">AddDeployment</span><span class="p">(</span><span class="s">"gpt-4o"</span><span class="p">,</span> <span class="s">"gpt-4o"</span><span class="p">,</span> <span class="s">"2024-08-06"</span><span class="p">);</span>
</code></pre></div></div>

<p>Now we can register this model with the DIAL Core:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">dial</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddDial</span><span class="p">(</span><span class="s">"dial"</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="m">8080</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithChatUI</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="m">3000</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WaitFor</span><span class="p">(</span><span class="n">gpt4o</span><span class="p">);</span> <span class="c1">// &lt;-- Wait for the model to be deployed</span>

<span class="kt">var</span> <span class="n">dialGpt4o</span> <span class="p">=</span> <span class="n">dial</span><span class="p">.</span><span class="nf">AddOpenAIModelAdapter</span><span class="p">(</span><span class="s">"dial-gpt-4o"</span><span class="p">,</span> <span class="n">deploymentName</span><span class="p">:</span> <span class="s">"gpt-4o"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithUpstream</span><span class="p">(</span><span class="n">gpt4o</span><span class="p">,</span> <span class="n">openAIApiKey</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"gpt-4o"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span>
        <span class="s">"gpt-4o is engineered for speed and efficiency. Its advanced ability to handle complex queries with minimal resources can translate into cost savings and performance."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithWellKnownIcon</span><span class="p">(</span><span class="n">WellKnownIcon</span><span class="p">.</span><span class="n">GPT4</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="run-everything-together">Run Everything Together</h3>

<p>And that is it! We have added the OpenAI model to our DIAL Core and we are ready to see how everything works together.</p>

<p>The final <code class="language-plaintext highlighter-rouge">Program.cs</code> file should look like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">DistributedApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">openAIApiKey</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddParameter</span><span class="p">(</span><span class="s">"azure-openai-api-key"</span><span class="p">,</span> <span class="n">secret</span><span class="p">:</span> <span class="k">true</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">openai</span> <span class="p">=</span> <span class="n">builder</span>
    <span class="p">.</span><span class="nf">AddAzureOpenAI</span><span class="p">(</span><span class="s">"openai"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">ConfigureInfrastructure</span><span class="p">(</span><span class="n">infra</span> <span class="p">=&gt;</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">resources</span> <span class="p">=</span> <span class="n">infra</span><span class="p">.</span><span class="nf">GetProvisionableResources</span><span class="p">();</span>
        <span class="kt">var</span> <span class="n">account</span> <span class="p">=</span> <span class="n">resources</span><span class="p">.</span><span class="n">OfType</span><span class="p">&lt;</span><span class="n">CognitiveServicesAccount</span><span class="p">&gt;().</span><span class="nf">Single</span><span class="p">();</span>
        <span class="n">account</span><span class="p">.</span><span class="n">Properties</span><span class="p">.</span><span class="n">DisableLocalAuth</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span> <span class="c1">// so we can use api key</span>
    <span class="p">});</span>
<span class="kt">var</span> <span class="n">gpt4o</span> <span class="p">=</span> <span class="n">openai</span><span class="p">.</span><span class="nf">AddDeployment</span><span class="p">(</span><span class="s">"gpt-4o"</span><span class="p">,</span> <span class="s">"gpt-4o"</span><span class="p">,</span> <span class="s">"2024-08-06"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">dial</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">AddDial</span><span class="p">(</span><span class="s">"dial"</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span> <span class="m">8080</span><span class="p">).</span><span class="nf">WithChatUI</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="m">3000</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">dialGpt4o</span> <span class="p">=</span> <span class="n">dial</span><span class="p">.</span><span class="nf">AddOpenAIModelAdapter</span><span class="p">(</span><span class="s">"dial-gpt-4o"</span><span class="p">,</span> <span class="n">deploymentName</span><span class="p">:</span> <span class="s">"gpt-4o"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithUpstream</span><span class="p">(</span><span class="n">gpt4o</span><span class="p">,</span> <span class="n">openAIApiKey</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"gpt-4o"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span>
        <span class="s">"gpt-4o is engineered for speed and efficiency. Its advanced ability to handle complex queries with minimal resources can translate into cost savings and performance."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithWellKnownIcon</span><span class="p">(</span><span class="n">WellKnownIcon</span><span class="p">.</span><span class="n">GPT4</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">todoAddonContainer</span> <span class="p">=</span> <span class="n">builder</span>
    <span class="p">.</span><span class="nf">AddDockerfile</span><span class="p">(</span><span class="s">"todo-addon-container"</span><span class="p">,</span> <span class="n">contextPath</span><span class="p">:</span> <span class="s">"addons"</span><span class="p">,</span> <span class="n">dockerfilePath</span><span class="p">:</span> <span class="s">"TodoDockerfile"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithHttpEndpoint</span><span class="p">(</span><span class="n">port</span><span class="p">:</span> <span class="k">null</span><span class="p">,</span> <span class="n">targetPort</span><span class="p">:</span> <span class="m">5003</span><span class="p">,</span> <span class="s">"http"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">todoAddon</span> <span class="p">=</span> <span class="n">dial</span><span class="p">.</span><span class="nf">AddAddon</span><span class="p">(</span><span class="s">"todo-addon"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithUpstream</span><span class="p">(</span><span class="n">todoAddonContainer</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"TODO List"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span><span class="s">"Addon that allows to manage user's TODO list."</span><span class="p">);</span>

<span class="n">dial</span><span class="p">.</span><span class="nf">AddAssistantsBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">AddAssistant</span><span class="p">(</span><span class="s">"todo-assistant"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithPrompt</span><span class="p">(</span>
        <span class="s">"You are assistant that helps to manage TODO list for the user. You can add, remove and view your TODOs."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDescription</span><span class="p">(</span>
        <span class="s">"The assistant that manages your TODO list. It can add, remove and view your TODOs."</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithDisplayName</span><span class="p">(</span><span class="s">"TODO Assistant"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithAddon</span><span class="p">(</span><span class="n">todoAddon</span><span class="p">);</span>

<span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">().</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<p>üöÄ Let‚Äôs run the AppHost again:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aspire run <span class="nt">--project</span> AppHost/AppHost.csproj
</code></pre></div></div>

<p>Here is the output of the Aspire CLI:</p>

<center>
  <img src="/assets/dial/addon/app-cli-3.png" style="margin: 15px;" width="50%">
</center>

<p>And here is the the Aspire Dashboard:</p>

<center>
  <img src="/assets/dial/addon/app-host-3.png" style="margin: 15px;">
</center>

<p>‚ú® Even more interesting is Aspire Graph Dashboard:</p>

<center>
  <img src="/assets/dial/addon/app-host-graph-3.png" style="margin: 15px;">
</center>

<p>Now, if you open the Chat UI, you will see the TODO Assistant. Let‚Äôs try to add some TODOs:</p>

<center>
  <img src="/assets/dial/addon/assistant-chat-demo.png" style="margin: 15px;">
</center>

<h2 id="conclusion">Conclusion</h2>

<p>In this blog post, we have learned how to extend <em>AI DIAL</em> with Addons using .NET Aspire. We have built a simple TODO Assistant that allows us to manage our TODO list using natural language commands.
We have also learned how to deploy OpenAI model that supports Function Calling and how to integrate it with the DIAL Core.</p>

<p>This is just the beginning of what you can do with <em>AI DIAL</em> and Addons. You can create more complex Addons that integrate with other services or APIs, or you can create your own custom Addons that provide unique functionality.</p>

<blockquote>
  <p>üôå I hope you found it helpful. If you have any questions, please feel free to reach out. If you‚Äôd like to support my work, a star on GitHub would be greatly appreciated! üôè</p>
</blockquote>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://github.com/NikiforovAll/ai-dial-dotnet" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/ai-dial-dotnet</a></li>
  <li><a href="https://epam-rail.com" target="_blank" rel="noopener noreferrer">https://epam-rail.com</a></li>
  <li><a href="https://docs.epam-rail.com" target="_blank" rel="noopener noreferrer">https://docs.epam-rail.com</a></li>
  <li><a href="https://github.com/epam/ai-dial" target="_blank" rel="noopener noreferrer">https://github.com/epam/ai-dial</a></li>
  <li><a href="https://platform.openai.com/docs/actions/introduction" target="_blank" rel="noopener noreferrer">https://platform.openai.com/docs/actions/introduction</a></li>
  <li><a href="https://docs.epam-rail.com/tutorials/quick-start-with-addon" target="_blank" rel="noopener noreferrer">https://docs.epam-rail.com/tutorials/quick-start-with-addon</a></li>
</ul>

	</div>

	

	
	<ul class="tag_box list-unstyled list-inline">
		<li><i class="fa fa-folder-open"></i></li>
		
		
		
		<li><a href="https://nikiforovall.github.io/categories.html#dotnet-ref" target="_blank" rel="noopener noreferrer">
				dotnet <span>(57)</span>
				,
			</a></li>
		
		<li><a href="https://nikiforovall.github.io/categories.html#ai-ref" target="_blank" rel="noopener noreferrer">
				ai <span>(7)</span>
				
			</a></li>
		
		
	</ul>
	

	
	<ul class="list-inline">
		<li><i class="fa fa-tags"></i></li>
		
		
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#ai-ref" target="_blank" rel="noopener noreferrer">
				ai <span>(20)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#aspire-ref" target="_blank" rel="noopener noreferrer">
				aspire <span>(20)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#dial-ref" target="_blank" rel="noopener noreferrer">
				dial <span>(2)</span>
				,
			</a>
		</li>
		
		<li>
			<a href="https://nikiforovall.github.io/tags.html#llm-orchestration-ref" target="_blank" rel="noopener noreferrer">
				llm-orchestration <span>(2)</span>
				
			</a>
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?&amp;via=nikiforovall" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" target="_blank" rel="noopener noreferrer">
				<i class="fa fa-twitter fa-lg"></i>
				Twitter
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image">
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="https://nikiforovall.github.io/dotnet/2025/04/08/hybrid-mcp-template.html" title="Learn how to use Model Context Protocol (MCP) Server Template in Hybrid Mode" target="_blank" rel="noopener noreferrer">‚Üê
				Previous</a></li>
		
		
		<li class="next">
<a href="https://nikiforovall.github.io/productivity/2025/04/19/github-copilot-prompt-engineering.html" title="Prompt Engineering with GitHub Copilot in Visual Studio Code" target="_blank" rel="noopener noreferrer">Next ‚Üí</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    
    <script src="https://utteranc.es/client.js" repo="NikiforovAll/nikiforovall.github.io" issue-term="pathname" label="Blog" theme="preferred-color-scheme" crossorigin="anonymous" async>
    </script>





		<footer>
			<hr>
			<p>
				¬© 2025 Oleksii Nikiforov with <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll" target="_blank" rel="noopener noreferrer">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="https://nikiforovall.github.io/assets/js/app.js"></script>
	
		<script type="text/javascript" src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js">
</script>
<script>
$(document).ready(function() {
    mermaid.initialize({
        theme: 'forest'
    });
});
</script>

	
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

