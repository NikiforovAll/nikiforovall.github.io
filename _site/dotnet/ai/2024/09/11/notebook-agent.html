<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Using Polyglot Notebooks and Kernel Memory in Your Day-to-Day Tasks | N+1 Blog</title>

	<!-- Meta Description -->
	
	<meta name="description" content="Learn how to use Polyglot Notebooks and Kernel Memory together to enhance your day-to-day tasks with the power of AI.">
	

	<meta name="author" content="Oleksii Nikiforov">

	<!-- Canonical URL -->
	<link rel="canonical" href="http://localhost:4000/dotnet/ai/2024/09/11/notebook-agent.html">

	<!-- Open Graph -->
	<meta property="og:title" content="Using Polyglot Notebooks and Kernel Memory in Your Day-to-Day Tasks">
	<meta property="og:description" content="Learn how to use Polyglot Notebooks and Kernel Memory together to enhance your day-to-day tasks with the power of AI.">
	<meta property="og:url" content="http://localhost:4000/dotnet/ai/2024/09/11/notebook-agent.html">
	<meta property="og:site_name" content="N+1 Blog">
	<meta property="og:type" content="article">
	
	<meta property="article:published_time" content="2024-09-11T00:00:00+03:00">
	
	<meta property="og:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@nikiforovall">
	<meta name="twitter:title" content="Using Polyglot Notebooks and Kernel Memory in Your Day-to-Day Tasks">
	<meta name="twitter:description" content="Learn how to use Polyglot Notebooks and Kernel Memory together to enhance your day-to-day tasks with the power of AI.">
	<meta name="twitter:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Search Feature Styles -->
	<style>
		.layout-page .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; padding: 6px 12px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; min-width: 220px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; height: 34px; box-sizing: border-box; }
		.layout-post .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 0; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 34px; height: 34px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; box-sizing: border-box; }
		.search-trigger:hover { background: #ebebeb; border-color: #c0c0c0; box-shadow: 0 2px 5px rgba(0,0,0,0.08); }
		.search-icon { color: #666; font-size: 14px; display: flex; align-items: center; }
		.search-placeholder { flex: 1; color: #999; font-size: 14px; user-select: none; }
		.search-keybind { display: flex; gap: 4px; align-items: center; }
		.search-key { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 6px; background: #e0e0e0; border: 1px solid #ccc; border-bottom: 2px solid #bbb; border-radius: 3px; color: #333; line-height: 1.2; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		.layout-post .search-placeholder { display: none; }
		.layout-post .search-keybind { display: none; }
		.search-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 10000; display: none; align-items: flex-start; justify-content: center; padding-top: 10vh; }
		.search-modal.open { display: flex; animation: fadeIn 0.2s ease; }
		@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
		.search-backdrop { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); }
		.search-modal-container { position: relative; width: 90%; max-width: 600px; background: white; border-radius: 8px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
		.search-input-container { display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #e0e0e0; gap: 12px; }
		.search-modal-icon { color: #666; font-size: 18px; }
		.search-modal-input { flex: 1; border: none; outline: none; font-size: 16px; color: #333; background: transparent; }
		.search-modal-input::placeholder { color: #999; }
		.search-close-btn { background: transparent; border: none; color: #999; font-size: 18px; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: all 0.15s ease; }
		.search-close-btn:hover { background: #f0f0f0; color: #333; }
		.search-results { max-height: 60vh; overflow-y: auto; padding: 8px; }
		.search-hint { padding: 40px 20px; text-align: center; color: #999; font-size: 14px; }
		.search-result-item { padding: 12px 16px; border-radius: 6px; cursor: pointer; transition: background-color 0.15s ease; border: 2px solid transparent; margin-bottom: 4px; }
		.search-result-item:hover { background: #f5f5f5; }
		.search-result-item.selected { background: #e8f4f8; border-color: #4a90e2; }
		.search-footer { display: flex; justify-content: center; gap: 20px; padding: 12px 20px; border-top: 1px solid #e0e0e0; background: #fafafa; font-size: 12px; color: #666; }
		.search-footer kbd { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 5px; background: white; border: 1px solid #ddd; border-radius: 3px; color: #333; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		@media (max-width: 768px) { .layout-page .search-trigger, .layout-post .search-trigger { display: none; } .search-modal { padding-top: 5vh; } .search-modal-container { width: 95%; max-width: none; margin: 0 10px; } .search-results { max-height: 50vh; } .search-footer { flex-wrap: wrap; gap: 10px; } }
	</style>

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Using Polyglot Notebooks and Kernel Memory in Your Day-to-Day Tasks",
  
  
  "description": "Learn how to use Polyglot Notebooks and Kernel Memory together to enhance your day-to-day tasks with the power of AI.",
  
  "image": ["http://localhost:4000/assets/media/default-post-image.png"],
  "datePublished": "2024-09-11T00:00:00+03:00",
  "dateModified": "2024-09-11T00:00:00+03:00",
  "author": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "url": "http://localhost:4000/about.html",
    "sameAs": [
      "https://github.com/nikiforovAll",
      "https://twitter.com/nikiforovall",
      "https://www.linkedin.com/in/nikiforov-oleksii",
      "https://t.me/nikiforovallblog"
    ]
  },
  "publisher": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=200"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:4000/dotnet/ai/2024/09/11/notebook-agent.html"
  },
  
  "articleSection": "dotnet",
  
  
  "keywords": "dotnet, semantic-kernel, kernel-memory, ai, aspire, developer-tools",
  
  "inLanguage": "en-US"
}
</script>


</head>

<body class="layout-post">
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle">
				N+1 Blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/topics.html">Topics</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</div>
<!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa-solid fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa-solid fa-home"></i>Home</a></li>
			<li><a href="/topics.html"><i class="fa-solid fa-bookmark"></i>Topics</a></li>
			<li><a href="/about.html"><i class="fa-solid fa-pencil"></i>About</a></li>
			<li class="divider">
			<li><a href="#"><i class="fa-solid fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<!-- Search Control -->
	<button id="search-trigger" class="search-trigger" type="button" aria-label="Open search">
		<span class="search-icon"><i class="fa-solid fa-search"></i></span>
		<span class="search-placeholder">Search</span>
		<div class="search-keybind">
			<kbd class="search-key" id="search-modifier">ctrl</kbd>
			<kbd class="search-key">K</kbd>
		</div>
	</button>

	<!-- Search Modal -->
	<div id="search-modal" class="search-modal">
		<div class="search-backdrop"></div>
		<div class="search-modal-container">
			<div class="search-input-container">
				<i class="fa-solid fa-search search-modal-icon"></i>
				<input type="text" id="search-input" class="search-modal-input" placeholder="Search blog posts..." autocomplete="off">
				<button id="search-close" class="search-close-btn" title="Close (ESC)">
					<i class="fa-solid fa-times"></i>
				</button>
			</div>
			<div id="search-results" class="search-results">
				<div class="search-hint">Type at least 2 characters to search...</div>
			</div>
			<div class="search-footer">
				<span><kbd>‚Üë</kbd> <kbd>‚Üì</kbd> to navigate</span>
				<span><kbd>‚Üµ</kbd> to select</span>
				<span><kbd>ESC</kbd> to close</span>
			</div>
		</div>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/" class="profile-link">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle profile-image">
		<div class="profile-accent"></div>
	</a>
	<h3 class="title">
        <a href="/">N+1 Blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://t.me/nikiforovallblog" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-telegram fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-linkedin fa-xl"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope fa-xl"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml" target="_blank" rel="noopener noreferrer">
				<i class="fa-solid fa-rss fa-xl"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Using Polyglot Notebooks and Kernel Memory in Your Day-to-Day Tasks </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			September
			11th,
			
			2024
		</span>

	
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/ai/2025/11/11/dotnet-format-agent.html">Transform .NET Diagnostics into a Specialized AI Agent with Claude Agent SDK <span class="label label-default">dotnet</span>  <span class="label label-default">ai</span>  <span class="label label-default">developer-tools</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/ai/2025/08/09/tech-debt-master.html">Introducing Technical Debt Master: AI-Powered Code Analysis with Local LLMs <span class="label label-default">ai</span>  <span class="label label-default">aspire</span>  <span class="label label-default">developer-tools</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/2025/04/08/hybrid-mcp-template.html">Learn how to use Model Context Protocol (MCP) Server Template in Hybrid Mode <span class="label label-default">dotnet</span>  <span class="label label-default">ai</span>  <span class="label label-default">aspire</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/2025/04/04/mcp-template-and-aspire.html">Simplifying Model Context Protocol (MCP) Server Development with Aspire <span class="label label-default">dotnet</span>  <span class="label label-default">ai</span>  <span class="label label-default">aspire</span>  <span class="label label-default">developer-tools</span> </a></h5>
	</div>
	
	
	
	

	<div class="article_body" style="margin-top: 30px;">
		<h2 id="tldr">TL;DR</h2>

<p>Learn how to use Polyglot Notebooks and Kernel Memory together to enhance your day-to-day tasks with the power of AI.</p>

<ul>
  <li><a href="#tldr">TL;DR</a></li>
  <li><a href="#motivation">Motivation</a></li>
  <li>
<a href="#example---generate-a-summary-of-a-blog">Example - ‚ÄòGenerate a summary of a blog‚Äô</a>
    <ul>
      <li><a href="#demo">Demo</a></li>
    </ul>
  </li>
  <li>
<a href="#anatomy-of-the-setup-aka-notebook-agent">Anatomy of the Setup (aka <code class="language-plaintext highlighter-rouge">notebook-agent</code>)</a>
    <ul>
      <li><a href="#another-example---ask-net-9-release-notes">Another Example - ‚ÄòAsk .NET 9 Release Notes‚Äô</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#references">References</a></li>
</ul>

<p><strong>Source code:</strong> <a href="https://github.com/NikiforovAll/notebook-agent" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/notebook-agent</a></p>

<h2 id="motivation">Motivation</h2>

<p><a href="https://github.com/dotnet/interactive" target="_blank" rel="noopener noreferrer">Polyglot Notebooks</a> is a powerful tool for developers. They allow you to combine code, text, and visualizations in a single document. This makes it easy to explore data, experiment with different tasks, and share your results with others.</p>

<p>üí° Notebooks are a great way to bring <em>programmability</em> to your work, allowing you to use code to automate repetitive tasks, analyze data, and generate reports. AI capabilities are a great addition to that.</p>

<p>üí° The more you invest in notebooks, the easier it becomes for you to be productive. Your experiments are stored over time, constituting a knowledge base that you can refer to at any moment.</p>

<hr>

<p>üéØ For this blog post, my goal is to show you how to work with LLMs in a notebook environment. It would be great to be able to use external sources as a context for my prompts to support my day-to-day activities.</p>

<h2 id="example---generate-a-summary-of-a-blog">Example - ‚ÄòGenerate a summary of a blog‚Äô</h2>

<p>Let‚Äôs say you have a blog post that you want to summarize. You can use the LLM to generate a summary of the blog post. Here‚Äôs how you can do it:</p>

<ol>
  <li>Crawl the blog post and extract the text from the HTML content.</li>
  <li>Use the LLM to generate a summary of the blog post.</li>
</ol>

<p>It turns out that the <a href="https://github.com/microsoft/kernel-memory" target="_blank" rel="noopener noreferrer">Kernel Memory</a> takes care of it for you. All the heavy lifting is done by the <code class="language-plaintext highlighter-rouge">Kernel Memory</code>. You just need to provide the context and the prompt.</p>

<p>Here is the code that shows you how to do it:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">docId</span> <span class="p">=</span> <span class="k">await</span> <span class="n">memory</span><span class="p">.</span><span class="nf">ImportWebPageAsync</span><span class="p">(</span><span class="s">"https://nikiforovall.github.io/tags.html"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">answer</span> <span class="p">=</span> <span class="k">await</span> <span class="n">memory</span><span class="p">.</span><span class="nf">AskAsync</span><span class="p">(</span><span class="s">"What the nikiforovall blog is about?"</span><span class="p">,</span> <span class="n">filter</span><span class="p">:</span> <span class="n">MemoryFilters</span><span class="p">.</span><span class="nf">ByDocument</span><span class="p">(</span><span class="n">docId</span><span class="p">));</span>
</code></pre></div></div>

<h3 id="demo">Demo</h3>

<p>Here is the demo:</p>

<center>
  <video src="https://github.com/user-attachments/assets/e57c3055-532e-4ad6-a272-83cabbba600c" controls="controls" style="margin: 15px;" width="100%"></video>
</center>

<p>Output:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The nikiforovall blog, titled "N+1 Blog," focuses on topics related to programming and IT. It features a variety of posts that cover different aspects of software development, particularly within the .NET ecosystem. The blog includes discussions on modern API development, asynchronous programming, microservices, cloud computing, and tools like Keycloak for identity management. Additionally, it explores design patterns, coding stories, and practical coding techniques, making it a resource for developers looking to enhance their skills and knowledge in these areas.
</code></pre></div></div>

<p>ü§î But, how do I get an instance of <code class="language-plaintext highlighter-rouge">memory</code> you may ask? Let‚Äôs see how to do it using <code class="language-plaintext highlighter-rouge">Testcontainers</code></p>

<h2 id="anatomy-of-the-setup-aka-notebook-agent">Anatomy of the Setup (aka <code class="language-plaintext highlighter-rouge">notebook-agent</code>)</h2>

<p>I have created a project called <code class="language-plaintext highlighter-rouge">notebook-agent</code>. Basically, it is a starting point that has all the necessary bits to get you started.</p>

<p>See: <a href="https://github.com/NikiforovAll/notebook-agent" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/notebook-agent</a></p>

<p>Here is the structure of the project:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
‚îú‚îÄ‚îÄ .devcontainer
‚îÇ  ‚îî‚îÄ‚îÄ devcontainer.json
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ .vscode
‚îÇ  ‚îî‚îÄ‚îÄ extensions.json
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ src
  ‚îú‚îÄ‚îÄ OpenAiOptions.cs      - Options for OpenAI
  ‚îú‚îÄ‚îÄ ServiceDefaults.cs
  ‚îú‚îÄ‚îÄ appsettings.json      - Configuration file
  ‚îú‚îÄ‚îÄ playground.ipynb      - entry point (example)
  ‚îú‚îÄ‚îÄ ask-release-notes.ipynb   - (example)
  ‚îú‚îÄ‚îÄ setup-infrastructure.ipynb - PostgreSQL, pgvector
  ‚îî‚îÄ‚îÄ setup-kernel.ipynb     - Compose Kernel Memory
</code></pre></div></div>

<p>We have a few notebooks that will help you get started. Let‚Äôs start from the infrastructure bit: <code class="language-plaintext highlighter-rouge">setup-infrastructure.ipynb</code></p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// setup-infrastructure.ipynb</span>

<span class="k">using</span> <span class="nn">Testcontainers.PostgreSql</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Npgsql</span><span class="p">;</span>

<span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">PostgreSqlBuilder</span><span class="p">()</span>
  <span class="p">.</span><span class="nf">WithImage</span><span class="p">(</span><span class="s">"pgvector/pgvector:pg16"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithPortBinding</span><span class="p">(</span><span class="m">5432</span><span class="p">,</span> <span class="m">5432</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithDatabase</span><span class="p">(</span><span class="s">"memory-db"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithUsername</span><span class="p">(</span><span class="s">"postgres"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithPassword</span><span class="p">(</span><span class="s">"postgres"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithReuse</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">WithVolumeMount</span><span class="p">(</span><span class="s">"memory-db-volume"</span><span class="p">,</span> <span class="s">"/var/lib/postgresql/data"</span><span class="p">)</span>
  <span class="p">.</span><span class="nf">Build</span><span class="p">();</span>

<span class="k">await</span> <span class="n">db</span><span class="p">.</span><span class="nf">StartAsync</span><span class="p">();</span>

<span class="kt">var</span> <span class="n">connectionString</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">();</span>
</code></pre></div></div>

<p>In the code above, we are using <code class="language-plaintext highlighter-rouge">Testcontainers</code> to start a PostgreSQL instance with the <code class="language-plaintext highlighter-rouge">pgvector</code> extension. The <code class="language-plaintext highlighter-rouge">pgvector</code> extension is used to store the embeddings of the documents. The embeddings are used to search for the most relevant documents based on the context.</p>

<p>Once the infrastructure is ready, let‚Äôs see how to configure the <code class="language-plaintext highlighter-rouge">Kernel Memory</code>: <code class="language-plaintext highlighter-rouge">setup-kernel.ipynb</code></p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// setup-kernel.ipynb</span>

<span class="k">using</span> <span class="nn">Microsoft.Extensions.Hosting</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.DependencyInjection</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.Extensions.Configuration</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.KernelMemory</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.KernelMemory.SemanticKernel</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.SemanticKernel.ChatCompletion</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">Microsoft.SemanticKernel.Connectors.OpenAI</span><span class="p">;</span>

<span class="n">HostApplicationBuilder</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">Host</span><span class="p">.</span><span class="nf">CreateApplicationBuilder</span><span class="p">();</span>

<span class="kt">var</span> <span class="n">textGenerationOpetions</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="n">Configuration</span> <span class="c1">// configured in appsettings.json</span>
  <span class="p">.</span><span class="nf">GetSection</span><span class="p">(</span><span class="s">"TextGeneration"</span><span class="p">)</span>
  <span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">OpenAiOptions</span><span class="p">&gt;();</span>

<span class="kt">var</span> <span class="n">textEmbeddingOptions</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="n">Configuration</span> <span class="c1">// configured in appsettings.json</span>
  <span class="p">.</span><span class="nf">GetSection</span><span class="p">(</span><span class="s">"TextEmbeddingGeneration"</span><span class="p">)</span>
  <span class="p">.</span><span class="n">Get</span><span class="p">&lt;</span><span class="n">OpenAiOptions</span><span class="p">&gt;();</span>

<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddKernelMemory</span><span class="p">&lt;</span><span class="n">MemoryServerless</span><span class="p">&gt;(</span><span class="n">memoryBuilder</span> <span class="p">=&gt;</span>
<span class="p">{</span>
  <span class="n">memoryBuilder</span>
    <span class="p">.</span><span class="nf">WithPostgresMemoryDb</span><span class="p">(</span><span class="k">new</span><span class="p">()</span> 
      <span class="p">{</span>
        <span class="n">ConnectionString</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="n">Configuration</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">(</span><span class="s">"memory-db"</span><span class="p">)!</span> <span class="c1">// connection string to the PostgreSQL</span>
      <span class="p">}</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithSemanticKernelTextGenerationService</span><span class="p">(</span> <span class="c1">// text completion</span>
      <span class="k">new</span> <span class="nf">AzureOpenAIChatCompletionService</span><span class="p">(</span>
        <span class="n">deploymentName</span><span class="p">:</span> <span class="n">textGenerationOpetions</span><span class="p">.</span><span class="n">Deployment</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="n">textGenerationOpetions</span><span class="p">.</span><span class="n">Endpoint</span><span class="p">,</span>
        <span class="n">apiKey</span><span class="p">:</span> <span class="n">textGenerationOpetions</span><span class="p">.</span><span class="n">ApiKey</span>
      <span class="p">),</span>
      <span class="k">new</span> <span class="nf">SemanticKernelConfig</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nf">WithSemanticKernelTextEmbeddingGenerationService</span><span class="p">(</span> <span class="c1">// text embedding</span>
      <span class="k">new</span> <span class="nf">AzureOpenAITextEmbeddingGenerationService</span><span class="p">(</span>
        <span class="n">deploymentName</span><span class="p">:</span> <span class="n">textEmbeddingOptions</span><span class="p">.</span><span class="n">Deployment</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">:</span> <span class="n">textEmbeddingOptions</span><span class="p">.</span><span class="n">Endpoint</span><span class="p">,</span>
        <span class="n">apiKey</span><span class="p">:</span> <span class="n">textEmbeddingOptions</span><span class="p">.</span><span class="n">ApiKey</span>
      <span class="p">),</span>
      <span class="k">new</span> <span class="nf">SemanticKernelConfig</span><span class="p">()</span>
    <span class="p">);</span>
<span class="p">});</span>

<span class="n">IHost</span> <span class="n">host</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">();</span>

<span class="n">IKernelMemory</span> <span class="n">memory</span> <span class="p">=</span> <span class="n">host</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">GetRequiredService</span><span class="p">&lt;</span><span class="n">IKernelMemory</span><span class="p">&gt;();</span>
<span class="n">IServiceProvider</span> <span class="n">services</span> <span class="p">=</span> <span class="n">host</span><span class="p">.</span><span class="n">Services</span><span class="p">;</span>
</code></pre></div></div>

<p>üöÄ Now, we have an the instance <em>Kernel Memory</em> named - <code class="language-plaintext highlighter-rouge">memory</code>. Just run the import command from a notebook: <code class="language-plaintext highlighter-rouge">#!import ./setup-kernel.ipynb</code></p>

<h3 id="another-example---ask-net-9-release-notes">Another Example - ‚ÄòAsk .NET 9 Release Notes‚Äô</h3>

<p>For example, assume we want to be able to chat with LLM about the <em>latest release of .NET 9</em>. Here is how to do it:</p>

<ol>
  <li>Create a new notebook: <code class="language-plaintext highlighter-rouge">ask-release-notes.ipynb</code>
</li>
  <li>Import the <code class="language-plaintext highlighter-rouge">setup-kernel.ipynb</code> notebook</li>
  <li>Index of the release notes</li>
  <li>Ask the question</li>
</ol>

<p>1Ô∏è‚É£ Index release notes:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">tags</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">TagCollection</span><span class="p">()</span> <span class="p">{</span> <span class="p">[</span><span class="s">"release"</span><span class="p">]</span> <span class="p">=</span> <span class="p">[</span><span class="s">".NET 9"</span><span class="p">,</span><span class="s">"RC1"</span><span class="p">]</span> <span class="p">};</span> <span class="c1">// tagging provides additional information, improves search results</span>

<span class="kt">var</span> <span class="n">librariesReleaseNotes</span> <span class="p">=</span> <span class="s">"https://raw.githubusercontent.com/dotnet/core/main/release-notes/9.0/preview/rc1/libraries.md"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">aspnetCoreReleaseNotes</span> <span class="p">=</span> <span class="s">"https://raw.githubusercontent.com/dotnet/core/main/release-notes/9.0/preview/rc1/libraries.md"</span><span class="p">;</span>

<span class="n">Task</span><span class="p">[]</span> <span class="n">tasks</span> <span class="p">=</span> <span class="p">[</span>
  <span class="n">memory</span><span class="p">.</span><span class="nf">ImportWebPageAsync</span><span class="p">(</span><span class="n">librariesReleaseNotes</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">tags</span><span class="p">),</span>
  <span class="n">memory</span><span class="p">.</span><span class="nf">ImportWebPageAsync</span><span class="p">(</span><span class="n">aspnetCoreReleaseNotes</span><span class="p">,</span> <span class="n">tags</span><span class="p">:</span> <span class="n">tags</span><span class="p">),</span>
<span class="p">];</span>
<span class="k">await</span> <span class="n">Task</span><span class="p">.</span><span class="nf">WhenAll</span><span class="p">(</span><span class="n">tasks</span><span class="p">);</span>
</code></pre></div></div>

<p>2Ô∏è‚É£ Ask the question:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">answer</span> <span class="p">=</span> <span class="k">await</span> <span class="n">memory</span><span class="p">.</span><span class="nf">AskAsync</span><span class="p">(</span><span class="s">"What are the latest additions to .NET 9 release?"</span><span class="p">,</span> <span class="n">minRelevance</span><span class="p">:</span> <span class="m">0.80</span><span class="p">);</span>

<span class="n">answer</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="nf">DisplayAs</span><span class="p">(</span><span class="s">"text/markdown"</span><span class="p">);</span>
</code></pre></div></div>

<p>Here is the output:</p>

<center>
  <img src="/assets/notebook-agent/ask-release-notes-demo.png" style="margin: 15px;" width="100%">
</center>

<h2 id="conclusion">Conclusion</h2>

<p>In this post, we have seen how to use Polyglot Notebooks and Kernel Memory together to empower your day-to-day tasks with the power of AI. We have seen how to set up the infrastructure using <code class="language-plaintext highlighter-rouge">Testcontainers</code> and how to configure the <code class="language-plaintext highlighter-rouge">Kernel Memory</code> to use the LLM.</p>

<blockquote>
  <p>üôå I hope you found it helpful. If you have any questions, please feel free to reach out. If you‚Äôd like to support my work, a star on GitHub would be greatly appreciated! üôè</p>
</blockquote>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://github.com/NikiforovAll/notebook-agent" target="_blank" rel="noopener noreferrer">Source Code: notebook-agent</a></li>
  <li><a href="https://github.com/microsoft/semantic-kernel" target="_blank" rel="noopener noreferrer">Semantic Kernel</a></li>
  <li><a href="https://github.com/microsoft/kernel-memory" target="_blank" rel="noopener noreferrer">Kernel Memory</a></li>
  <li><a href="https://github.com/dotnet/interactive" target="_blank" rel="noopener noreferrer">.NET Interactive</a></li>
  <li><a href="https://testcontainers.com/modules/?language=dotnet" target="_blank" rel="noopener noreferrer">Testcontainers</a></li>
</ul>

	</div>

	

	
	<ul class="list-inline">
		<li>
<i class="fa-solid fa-bookmark"></i> Topics:</li>
		
		
		
		<li>
			<a href="/topics.html#dotnet-cat-ref">
				dotnet <span>(58)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#ai-cat-ref">
				ai <span>(11)</span>
			</a>
			 ¬∑
		</li>
		
		
		
		
		
		<li>
			<a href="/topics.html#dotnet-tag-ref">
				dotnet <span>(63)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#semantic-kernel-tag-ref">
				semantic-kernel <span>(2)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#kernel-memory-tag-ref">
				kernel-memory <span>(2)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#ai-tag-ref">
				ai <span>(25)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#aspire-tag-ref">
				aspire <span>(20)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#developer-tools-tag-ref">
				developer-tools <span>(7)</span>
			</a>
			
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter" href="http://x.com/share?&amp;via=nikiforovall" onclick="window.open(this.href, 'x-share', 'width=550,height=235');return false;" target="_blank" rel="noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-lg"></i>
				X
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image">
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="/dotnet/ai/2024/09/04/typical-rag-dotnet.html" title="Typical RAG Implementation Using Semantic Kernel, Kernel Memory, and Aspire in .NET">‚Üê
				Previous</a></li>
		
		
		<li class="next">
<a href="/dotnet/2024/09/14/quality-gates-dotnet.html" title="A Tyrant Guide to Code Quality Gates featuring CSharpier, Husky.NET, and SonarCloud">Next ‚Üí</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    
    <script src="https://utteranc.es/client.js" repo="NikiforovAll/nikiforovall.github.io" issue-term="pathname" label="Blog" theme="preferred-color-scheme" crossorigin="anonymous" async>
    </script>





		<footer>
			<hr>
			<p>
				¬© 2026 Oleksii Nikiforov with <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll" target="_blank" rel="noopener noreferrer">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
	<script src="https://unpkg.com/lunr/lunr.js"></script>
	<script type="text/javascript" src="/assets/js/search.js"></script>
	<script type="text/javascript" src="/assets/js/copy-code.js"></script>
	
		<script type="text/javascript" src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js">
</script>
<script>
$(document).ready(function() {
    mermaid.initialize({
        theme: 'forest'
    });
});
</script>

	
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

