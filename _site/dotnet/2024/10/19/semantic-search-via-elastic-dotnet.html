<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Semantic Search with Elasticsearch in .NET | N+1 Blog</title>

	<!-- Meta Description -->
	
	<meta name="description" content="This post demonstrates how to perform Semantic Search using Elasticsearch and Polyglot Notebooks">
	

	<meta name="author" content="Oleksii Nikiforov">

	<!-- Canonical URL -->
	<link rel="canonical" href="http://localhost:4000/dotnet/2024/10/19/semantic-search-via-elastic-dotnet.html">

	<!-- Open Graph -->
	<meta property="og:title" content="Semantic Search with Elasticsearch in .NET">
	<meta property="og:description" content="This post demonstrates how to perform Semantic Search using Elasticsearch and Polyglot Notebooks">
	<meta property="og:url" content="http://localhost:4000/dotnet/2024/10/19/semantic-search-via-elastic-dotnet.html">
	<meta property="og:site_name" content="N+1 Blog">
	<meta property="og:type" content="article">
	
	<meta property="article:published_time" content="2024-10-19T00:00:00+03:00">
	
	<meta property="og:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@nikiforovall">
	<meta name="twitter:title" content="Semantic Search with Elasticsearch in .NET">
	<meta name="twitter:description" content="This post demonstrates how to perform Semantic Search using Elasticsearch and Polyglot Notebooks">
	<meta name="twitter:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Search Feature Styles -->
	<style>
		.layout-page .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; padding: 6px 12px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; min-width: 220px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; height: 34px; box-sizing: border-box; }
		.layout-post .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 0; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 34px; height: 34px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; box-sizing: border-box; }
		.search-trigger:hover { background: #ebebeb; border-color: #c0c0c0; box-shadow: 0 2px 5px rgba(0,0,0,0.08); }
		.search-icon { color: #666; font-size: 14px; display: flex; align-items: center; }
		.search-placeholder { flex: 1; color: #999; font-size: 14px; user-select: none; }
		.search-keybind { display: flex; gap: 4px; align-items: center; }
		.search-key { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 6px; background: #e0e0e0; border: 1px solid #ccc; border-bottom: 2px solid #bbb; border-radius: 3px; color: #333; line-height: 1.2; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		.layout-post .search-placeholder { display: none; }
		.layout-post .search-keybind { display: none; }
		.search-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 10000; display: none; align-items: flex-start; justify-content: center; padding-top: 10vh; }
		.search-modal.open { display: flex; animation: fadeIn 0.2s ease; }
		@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
		.search-backdrop { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); }
		.search-modal-container { position: relative; width: 90%; max-width: 600px; background: white; border-radius: 8px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
		.search-input-container { display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #e0e0e0; gap: 12px; }
		.search-modal-icon { color: #666; font-size: 18px; }
		.search-modal-input { flex: 1; border: none; outline: none; font-size: 16px; color: #333; background: transparent; }
		.search-modal-input::placeholder { color: #999; }
		.search-close-btn { background: transparent; border: none; color: #999; font-size: 18px; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: all 0.15s ease; }
		.search-close-btn:hover { background: #f0f0f0; color: #333; }
		.search-results { max-height: 60vh; overflow-y: auto; padding: 8px; }
		.search-hint { padding: 40px 20px; text-align: center; color: #999; font-size: 14px; }
		.search-result-item { padding: 12px 16px; border-radius: 6px; cursor: pointer; transition: background-color 0.15s ease; border: 2px solid transparent; margin-bottom: 4px; }
		.search-result-item:hover { background: #f5f5f5; }
		.search-result-item.selected { background: #e8f4f8; border-color: #4a90e2; }
		.search-footer { display: flex; justify-content: center; gap: 20px; padding: 12px 20px; border-top: 1px solid #e0e0e0; background: #fafafa; font-size: 12px; color: #666; }
		.search-footer kbd { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 5px; background: white; border: 1px solid #ddd; border-radius: 3px; color: #333; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		@media (max-width: 768px) { .layout-page .search-trigger, .layout-post .search-trigger { display: none; } .search-modal { padding-top: 5vh; } .search-modal-container { width: 95%; max-width: none; margin: 0 10px; } .search-results { max-height: 50vh; } .search-footer { flex-wrap: wrap; gap: 10px; } }
	</style>

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Semantic Search with Elasticsearch in .NET",
  
  
  "description": "This post demonstrates how to perform Semantic Search using Elasticsearch and Polyglot Notebooks",
  
  "image": ["http://localhost:4000/assets/media/default-post-image.png"],
  "datePublished": "2024-10-19T00:00:00+03:00",
  "dateModified": "2024-10-19T00:00:00+03:00",
  "author": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "url": "http://localhost:4000/about.html",
    "sameAs": [
      "https://github.com/nikiforovAll",
      "https://twitter.com/nikiforovall",
      "https://www.linkedin.com/in/nikiforov-oleksii",
      "https://t.me/nikiforovallblog"
    ]
  },
  "publisher": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=200"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:4000/dotnet/2024/10/19/semantic-search-via-elastic-dotnet.html"
  },
  
  "articleSection": "dotnet",
  
  
  "keywords": "dotnet, elasticsearch, ai, rag, search",
  
  "inLanguage": "en-US"
}
</script>


</head>

<body class="layout-post">
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle">
				N+1 Blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/topics.html">Topics</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</div>
<!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa-solid fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa-solid fa-home"></i>Home</a></li>
			<li><a href="/topics.html"><i class="fa-solid fa-bookmark"></i>Topics</a></li>
			<li><a href="/about.html"><i class="fa-solid fa-pencil"></i>About</a></li>
			<li class="divider">
			<li><a href="#"><i class="fa-solid fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<!-- Search Control -->
	<button id="search-trigger" class="search-trigger" type="button" aria-label="Open search">
		<span class="search-icon"><i class="fa-solid fa-search"></i></span>
		<span class="search-placeholder">Search</span>
		<div class="search-keybind">
			<kbd class="search-key" id="search-modifier">ctrl</kbd>
			<kbd class="search-key">K</kbd>
		</div>
	</button>

	<!-- Search Modal -->
	<div id="search-modal" class="search-modal">
		<div class="search-backdrop"></div>
		<div class="search-modal-container">
			<div class="search-input-container">
				<i class="fa-solid fa-search search-modal-icon"></i>
				<input type="text" id="search-input" class="search-modal-input" placeholder="Search blog posts..." autocomplete="off">
				<button id="search-close" class="search-close-btn" title="Close (ESC)">
					<i class="fa-solid fa-times"></i>
				</button>
			</div>
			<div id="search-results" class="search-results">
				<div class="search-hint">Type at least 2 characters to search...</div>
			</div>
			<div class="search-footer">
				<span><kbd>‚Üë</kbd> <kbd>‚Üì</kbd> to navigate</span>
				<span><kbd>‚Üµ</kbd> to select</span>
				<span><kbd>ESC</kbd> to close</span>
			</div>
		</div>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/" class="profile-link">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle profile-image">
		<div class="profile-accent"></div>
	</a>
	<h3 class="title">
        <a href="/">N+1 Blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://t.me/nikiforovallblog" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-telegram fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-linkedin fa-xl"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope fa-xl"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml" target="_blank" rel="noopener noreferrer">
				<i class="fa-solid fa-rss fa-xl"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>Semantic Search with Elasticsearch in .NET </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			October
			19th,
			
			2024
		</span>

	
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/2024/11/02/elastic-hybrid-search.html">Hybrid Search with Elasticsearch in .NET <span class="label label-default">dotnet</span>  <span class="label label-default">elasticsearch</span>  <span class="label label-default">search</span>  <span class="label label-default">ai</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/2024/10/20/querying-and-filtering-elastic-dotnet.html">Querying and Filtering via Elastic.Clients.Elasticsearch in .NET <span class="label label-default">dotnet</span>  <span class="label label-default">elasticsearch</span>  <span class="label label-default">search</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/ai/2024/09/04/typical-rag-dotnet.html">Typical RAG Implementation Using Semantic Kernel, Kernel Memory, and Aspire in .NET <span class="label label-default">dotnet</span>  <span class="label label-default">ai</span>  <span class="label label-default">rag</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	
	

	<div class="article_body" style="margin-top: 30px;">
		<h2 id="tldr">TL;DR</h2>

<p>In this post, we will explore how to perform Semantic Search in .NET.</p>

<p><strong>Source code:</strong> <a href="https://github.com/NikiforovAll/elasticsearch-dotnet-playground/blob/main/src/elasticsearch-getting-started/00-quick-start.ipynb" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/elasticsearch-dotnet-playground/blob/main/src/elasticsearch-getting-started/00-quick-start.ipynb</a></p>

<ul>
  <li><a href="#tldr">TL;DR</a></li>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#getting-started">Getting Started</a></li>
  <li><a href="#initialize-the-elasticsearch-client">Initialize the Elasticsearch Client</a></li>
  <li><a href="#generate-embeddings">Generate Embeddings</a></li>
  <li><a href="#index-data">Index Data</a></li>
  <li>
<a href="#making-queries">Making queries</a>
    <ul>
      <li><a href="#semantic-search">Semantic Search</a></li>
      <li><a href="#semantic-search-and-filtering">Semantic Search and Filtering</a></li>
    </ul>
  </li>
  <li><a href="#conclusion">Conclusion</a></li>
  <li><a href="#references">References</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>Semantic search is a technique used to improve search accuracy by understanding the contextual meaning of terms within a search query. Unlike traditional keyword-based search, which matches exact words, semantic search aims to understand the intent and contextual meaning behind the words. This approach improves search results and provides more relevant information to the user.</p>

<h2 id="getting-started">Getting Started</h2>

<p>I‚Äôve prepared a Jupyter notebook that demonstrates how to perform a semantic search using the <code class="language-plaintext highlighter-rouge">Elastic.Clients.Elasticsearch</code>. You can find the source code <a href="https://github.com/NikiforovAll/elasticsearch-dotnet-playground/blob/main/src/elasticsearch-getting-started/00-quick-start.ipynb" target="_blank" rel="noopener noreferrer">here</a>.</p>

<center>
    <video src="https://github.com/user-attachments/assets/25bdd7d9-d845-4c2c-9222-867129137b2b" width="90%" controls="controls"></video>
</center>

<hr>

<p>üìù Down below, I will guide you through the main steps of the notebook:</p>

<ol>
  <li>Initialize the Elasticsearch Client</li>
  <li>Generate Embeddings</li>
  <li>Index Data</li>
  <li>Making queries</li>
</ol>

<h2 id="initialize-the-elasticsearch-client">Initialize the Elasticsearch Client</h2>

<p>We can use <code class="language-plaintext highlighter-rouge">Testcontainers</code> to run Elasticsearch from the notebook. Here is how you can do it:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">elasticsearchContainer</span> <span class="p">=</span>  <span class="k">new</span> <span class="nf">ElasticsearchBuilder</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">WithPortBinding</span><span class="p">(</span><span class="m">9200</span><span class="p">,</span> <span class="m">9200</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithPortBinding</span><span class="p">(</span><span class="m">9300</span><span class="p">,</span> <span class="m">9300</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">WithReuse</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Build</span><span class="p">();</span>
<span class="k">await</span> <span class="n">elasticsearchContainer</span><span class="p">.</span><span class="nf">StartAsync</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">connectionString</span> <span class="p">=</span> <span class="n">elasticsearchContainer</span><span class="p">.</span><span class="nf">GetConnectionString</span><span class="p">();</span> <span class="c1">// https://elastic:elastic@127.0.0.1:9200/</span>
</code></pre></div></div>

<p>Now, we can initialize the Elasticsearch client:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">elasticSettings</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ElasticsearchClientSettings</span><span class="p">(</span><span class="n">connectionString</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">DisableDirectStreaming</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">ServerCertificateValidationCallback</span><span class="p">(</span><span class="n">CertificateValidations</span><span class="p">.</span><span class="n">AllowAll</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">ElasticsearchClient</span><span class="p">(</span><span class="n">elasticSettings</span><span class="p">);</span>
</code></pre></div></div>

<p>Let‚Äôs see if it works:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">info</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">InfoAsync</span><span class="p">();</span>

<span class="nf">DumpResponse</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>
</code></pre></div></div>

<p>And here is the output:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"35937efa7867"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cluster_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker-cluster"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cluster_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IZOZjoDyRpKHFN1sNGjs1g"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8.6.1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build_flavor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"docker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"180c9830da956993e59e2cd70eb32b5e383ea42c"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-01-24T21:35:11.506992272Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"build_snapshot"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lucene_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9.4.2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"minimum_wire_compatibility_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7.17.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"minimum_index_compatibility_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7.0.0"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"tagline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You Know, for Search"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>üôå Everything looks good so far, let‚Äôs continue and see how to generate and embeddings.</p>

<h2 id="generate-embeddings">Generate Embeddings</h2>

<p>Embeddings are a type of representation for text where words, phrases, or even entire documents are mapped to vectors of real numbers. These vectors capture the semantic meaning of the text, allowing for more nuanced and context-aware comparisons between different pieces of text.</p>

<p>Traditional keyword-based search might not recognize ‚Äúcar‚Äù and ‚Äúautomobile‚Äù as related, but embeddings will map these words to similar vectors, understanding that they are synonyms and thus improving search relevance.</p>

<p>We can use <code class="language-plaintext highlighter-rouge">Microsoft.Extensions.AI.OpenAI</code> and <code class="language-plaintext highlighter-rouge">Azure.AI.OpenAI</code> NuGet packages to create an instance of <code class="language-plaintext highlighter-rouge">IEmbeddingGenerator</code>:</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AzureOpenAIClient</span><span class="p">(</span><span class="k">new</span> <span class="nf">Uri</span><span class="p">(</span><span class="n">envs</span><span class="p">[</span><span class="s">"AZURE_OPENAI_ENDPOINT"</span><span class="p">]),</span> <span class="k">new</span> <span class="nf">ApiKeyCredential</span><span class="p">(</span><span class="n">envs</span><span class="p">[</span><span class="s">"AZURE_OPENAI_APIKEY"</span><span class="p">]));</span>

<span class="n">IEmbeddingGenerator</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="n">Embedding</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;&gt;</span> <span class="n">generator</span> <span class="p">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">AsEmbeddingGenerator</span><span class="p">(</span><span class="n">modelId</span><span class="p">:</span> <span class="s">"text-embedding-3-small"</span><span class="p">);</span>
</code></pre></div></div>

<p>We can implement <code class="language-plaintext highlighter-rouge">ToEmbedding</code> method to convert a string to an embedding:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="n">Task</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">[</span><span class="k">]&gt;</span> <span class="nf">ToEmbedding</span><span class="p">(</span><span class="kt">string</span> <span class="n">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">var</span> <span class="n">dimension</span> <span class="p">=</span> <span class="m">384</span><span class="p">;</span>
    <span class="n">GeneratedEmbeddings</span><span class="p">&lt;</span><span class="n">Embedding</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;&gt;</span> <span class="n">embeddings</span> <span class="p">=</span> <span class="k">await</span> <span class="n">generator</span>
        <span class="p">.</span><span class="nf">GenerateAsync</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="k">new</span> <span class="n">EmbeddingGenerationOptions</span><span class="p">{</span>
            <span class="n">AdditionalProperties</span> <span class="p">=</span> <span class="k">new</span> <span class="n">AdditionalPropertiesDictionary</span><span class="p">{</span>
                <span class="p">{</span><span class="s">"dimensions"</span><span class="p">,</span> <span class="n">dimension</span><span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>

    <span class="k">return</span> <span class="n">embeddings</span><span class="p">.</span><span class="nf">First</span><span class="p">().</span><span class="n">Vector</span><span class="p">.</span><span class="nf">ToArray</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">float</span><span class="p">[]</span> <span class="n">embedding</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">ToEmbedding</span><span class="p">(</span><span class="s">"The quick brown fox jumps over the lazy dog"</span><span class="p">);</span>
<span class="nf">display</span><span class="p">(</span><span class="s">$"Dimensions length = </span><span class="p">{</span><span class="n">embedding</span><span class="p">.</span><span class="n">Length</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="index-data">Index Data</h2>

<p>Assume we have a dataset with information about popular programming books. The data model can be defined as following:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Book</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"title"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"summary"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Summary</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"authors"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">Authors</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"publish_date"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="n">DateTime</span> <span class="n">publish_date</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"num_reviews"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">num_reviews</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">[</span><span class="nf">JsonPropertyName</span><span class="p">(</span><span class="s">"publisher"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="kt">string</span> <span class="n">Publisher</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="kt">float</span><span class="p">[]</span> <span class="n">TitleVector</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now, we can create an index with the following mapping:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">indexDescriptor</span> <span class="p">=</span> <span class="k">new</span> <span class="n">CreateIndexRequestDescriptor</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="s">"book_index"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Mappings</span><span class="p">(</span><span class="n">m</span> <span class="p">=&gt;</span> <span class="n">m</span>
        <span class="p">.</span><span class="nf">Properties</span><span class="p">(</span><span class="n">pp</span> <span class="p">=&gt;</span> <span class="n">pp</span>
            <span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Title</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">DenseVector</span><span class="p">(</span>
                <span class="n">Infer</span><span class="p">.</span><span class="n">Property</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">TitleVector</span><span class="p">),</span>
                <span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="nf">Dims</span><span class="p">(</span><span class="n">dimension</span><span class="p">).</span><span class="nf">Index</span><span class="p">(</span><span class="k">true</span><span class="p">).</span><span class="nf">Similarity</span><span class="p">(</span><span class="n">DenseVectorSimilarity</span><span class="p">.</span><span class="n">Cosine</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">Text</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Summary</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">Date</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">publish_date</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">IntegerNumber</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">num_reviews</span><span class="p">)</span>
            <span class="p">.</span><span class="nf">Keyword</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Publisher</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="p">);</span>

<span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">Indices</span><span class="p">.</span><span class="n">CreateAsync</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">indexDescriptor</span><span class="p">);</span>
</code></pre></div></div>

<p>Note that we are using the <code class="language-plaintext highlighter-rouge">DenseVector</code> type to store the embeddings. We also specify the <code class="language-plaintext highlighter-rouge">Cosine</code> similarity function to compare the vectors.</p>

<p>Let‚Äôs download the test data and calculate ‚ÄúTitle‚Äù field embeddings:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">http</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">HttpClient</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">url</span> <span class="p">=</span> <span class="s">"https://raw.githubusercontent.com/elastic/elasticsearch-labs/main/notebooks/search/data.json"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">books</span> <span class="p">=</span>  <span class="k">await</span> <span class="n">http</span><span class="p">.</span><span class="n">GetFromJsonAsync</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">[</span><span class="k">]&gt;</span><span class="p">(</span><span class="n">url</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">book</span> <span class="k">in</span> <span class="n">books</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">book</span><span class="p">.</span><span class="n">TitleVector</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">ToEmbedding</span><span class="p">(</span><span class="n">book</span><span class="p">.</span><span class="n">Title</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now we can use Bulk API to upload data to Elasticsearch.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">BulkAsync</span><span class="p">(</span><span class="s">"book_index"</span><span class="p">,</span> <span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span><span class="p">.</span><span class="n">IndexMany</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">books</span><span class="p">,</span> <span class="p">(</span><span class="n">bd</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">bd</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">"book_index"</span><span class="p">)));</span>
</code></pre></div></div>

<h2 id="making-queries">Making queries</h2>

<p>Let‚Äôs use the keyword search to see if we have relevant data indexed. For example, we can search for books that contain <strong>‚ÄúJavaScript‚Äù</strong> in the title:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">searchResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">SearchAsync</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span>
    <span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">"book_index"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="n">q</span> <span class="p">=&gt;</span> <span class="n">q</span><span class="p">.</span><span class="nf">Match</span><span class="p">(</span><span class="n">m</span> <span class="p">=&gt;</span> <span class="n">m</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="n">f</span> <span class="p">=&gt;</span> <span class="n">f</span><span class="p">.</span><span class="n">Title</span><span class="p">).</span><span class="nf">Query</span><span class="p">(</span><span class="s">"JavaScript"</span><span class="p">)))</span>
<span class="p">);</span>

<span class="nf">DumpRequest</span><span class="p">(</span><span class="n">searchResponse</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="p">.</span><span class="n">Documents</span><span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Title</span><span class="p">).</span><span class="nf">DisplayTable</span><span class="p">();</span>
</code></pre></div></div>

<p>‚öôÔ∏èOutput:</p>

<center>
  <img src="/assets/semantic-search-elastic/q1.png" style="margin: 15px;" width="80%">
</center>

<h3 id="semantic-search">Semantic Search</h3>

<p>üéØ We want to perform a semantic search for books that are similar to a given query. We embed the query and perform a search.</p>

<p>Let‚Äôs say we want to find <strong>‚Äújavascript books‚Äù</strong>. We can use the KNN search to find the top 5 books that are similar to the <code class="language-plaintext highlighter-rouge">searchQuery</code>.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">searchQuery</span> <span class="p">=</span> <span class="s">"javascript books"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">queryEmbedding</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">ToEmbedding</span><span class="p">(</span><span class="n">searchQuery</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">searchResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">SearchAsync</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span>
    <span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">"book_index"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Knn</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span>
        <span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="n">f</span> <span class="p">=&gt;</span> <span class="n">f</span><span class="p">.</span><span class="n">TitleVector</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">QueryVector</span><span class="p">(</span><span class="n">queryEmbedding</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">k</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">NumCandidates</span><span class="p">(</span><span class="m">100</span><span class="p">))</span>
<span class="p">);</span>

<span class="kt">var</span> <span class="n">threshold</span> <span class="p">=</span> <span class="m">0.7</span><span class="p">;</span>
<span class="n">searchResponse</span><span class="p">.</span><span class="n">Hits</span>
    <span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Score</span> <span class="p">&gt;</span> <span class="n">threshold</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">x</span><span class="p">.</span><span class="n">Source</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">Score</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">DisplayTable</span><span class="p">();</span>
</code></pre></div></div>

<p>‚öôÔ∏èOutput:</p>

<center>
  <img src="/assets/semantic-search-elastic/q2.png" style="margin: 15px;" width="80%">
</center>

<h3 id="semantic-search-and-filtering">Semantic Search and Filtering</h3>

<p>Filter context is mostly used for filtering structured data. For example, use filter context to answer questions like:</p>

<ul>
  <li>Does this timestamp fall into the range 2015 to 2016?</li>
  <li>Is the status field set to ‚Äúpublished‚Äù?</li>
</ul>

<p>Filter context is in effect whenever a query clause is passed to a filter parameter, such as the filter or must_not parameters in a bool query.</p>

<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-filter-context.html#filter-context" target="_blank" rel="noopener noreferrer">Learn more</a> about filter context in the Elasticsearch docs.</p>

<p>The example below retrieves the top books that are similar to ‚Äújavascript books‚Äù based on their title vectors, and also Addison-Wesley as publisher.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">searchQuery</span> <span class="p">=</span> <span class="s">"javascript books"</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">queryEmbedding</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">ToEmbedding</span><span class="p">(</span><span class="n">searchQuery</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">searchResponse</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span><span class="p">.</span><span class="n">SearchAsync</span><span class="p">&lt;</span><span class="n">Book</span><span class="p">&gt;(</span><span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span>
    <span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="s">"book_index"</span><span class="p">)</span>
    <span class="p">.</span><span class="nf">Knn</span><span class="p">(</span><span class="n">d</span> <span class="p">=&gt;</span> <span class="n">d</span>
        <span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="n">f</span> <span class="p">=&gt;</span> <span class="n">f</span><span class="p">.</span><span class="n">TitleVector</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">QueryVector</span><span class="p">(</span><span class="n">queryEmbedding</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">k</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">NumCandidates</span><span class="p">(</span><span class="m">100</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">Filter</span><span class="p">(</span><span class="n">f</span> <span class="p">=&gt;</span> <span class="n">f</span><span class="p">.</span><span class="nf">Term</span><span class="p">(</span><span class="n">t</span> <span class="p">=&gt;</span> <span class="n">t</span><span class="p">.</span><span class="nf">Field</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Publisher</span><span class="p">).</span><span class="nf">Value</span><span class="p">(</span><span class="s">"addison-wesley"</span><span class="p">)))</span> 
    <span class="p">)</span>
<span class="p">);</span>

<span class="n">searchResponse</span><span class="p">.</span><span class="n">Hits</span>
    <span class="p">.</span><span class="nf">Select</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="k">new</span> <span class="p">{</span> <span class="n">x</span><span class="p">.</span><span class="n">Source</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">Score</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">DisplayTable</span><span class="p">();</span> 
</code></pre></div></div>

<p>‚öôÔ∏èOutput:</p>

<center>
  <img src="/assets/semantic-search-elastic/q3.png" style="margin: 15px;" width="80%">
</center>

<h2 id="conclusion">Conclusion</h2>

<blockquote>
  <p>üôå I hope you found it helpful. If you have any questions, please feel free to reach out. If you‚Äôd like to support my work, a star on GitHub would be greatly appreciated! üôè</p>
</blockquote>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://github.com/elastic/elasticsearch-labs" target="_blank" rel="noopener noreferrer">https://github.com/elastic/elasticsearch-labs</a></li>
  <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/knn-search.html" target="_blank" rel="noopener noreferrer">https://www.elastic.co/guide/en/elasticsearch/reference/current/knn-search.html</a></li>
  <li><a href="https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/create-resource" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/create-resource</a></li>
  <li><a href="https://www.galileo.ai/blog/mastering-rag-how-to-select-an-embedding-model" target="_blank" rel="noopener noreferrer">https://www.galileo.ai/blog/mastering-rag-how-to-select-an-embedding-model</a></li>
</ul>

	</div>

	

	
	<ul class="list-inline">
		<li>
<i class="fa-solid fa-bookmark"></i> Topics:</li>
		
		
		
		<li>
			<a href="/topics.html#dotnet-cat-ref">
				dotnet <span>(58)</span>
			</a>
			 ¬∑
		</li>
		
		
		
		
		
		<li>
			<a href="/topics.html#dotnet-tag-ref">
				dotnet <span>(63)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#elasticsearch-tag-ref">
				elasticsearch <span>(3)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#ai-tag-ref">
				ai <span>(25)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#rag-tag-ref">
				rag <span>(2)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#search-tag-ref">
				search <span>(3)</span>
			</a>
			
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter" href="http://x.com/share?&amp;via=nikiforovall" onclick="window.open(this.href, 'x-share', 'width=550,height=235');return false;" target="_blank" rel="noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-lg"></i>
				X
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image">
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="/dotnet/aspire/2024/09/30/aspire-lessons-learned.html" title="10 Lessons I Learned from Using Aspire in Production">‚Üê
				Previous</a></li>
		
		
		<li class="next">
<a href="/dotnet/2024/10/20/querying-and-filtering-elastic-dotnet.html" title="Querying and Filtering via Elastic.Clients.Elasticsearch in .NET">Next ‚Üí</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    
    <script src="https://utteranc.es/client.js" repo="NikiforovAll/nikiforovall.github.io" issue-term="pathname" label="Blog" theme="preferred-color-scheme" crossorigin="anonymous" async>
    </script>





		<footer>
			<hr>
			<p>
				¬© 2026 Oleksii Nikiforov with <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll" target="_blank" rel="noopener noreferrer">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
	<script src="https://unpkg.com/lunr/lunr.js"></script>
	<script type="text/javascript" src="/assets/js/search.js"></script>
	
		<script type="text/javascript" src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js">
</script>
<script>
$(document).ready(function() {
    mermaid.initialize({
        theme: 'forest'
    });
});
</script>

	
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

