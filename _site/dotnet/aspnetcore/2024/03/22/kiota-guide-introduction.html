<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>A Guide to OpenAPI Client Generation with Kiota. Introduction (Part 1) | N+1 Blog</title>

	<!-- Meta Description -->
	
	<meta name="description" content="Introduces Kiota, explaining its purpose and relevance in the context of OpenAPI client generation. Highlights its features and benefits.">
	

	<meta name="author" content="Oleksii Nikiforov">

	<!-- Canonical URL -->
	<link rel="canonical" href="http://localhost:4000/dotnet/aspnetcore/2024/03/22/kiota-guide-introduction.html">

	<!-- Open Graph -->
	<meta property="og:title" content="A Guide to OpenAPI Client Generation with Kiota. Introduction (Part 1)">
	<meta property="og:description" content="Introduces Kiota, explaining its purpose and relevance in the context of OpenAPI client generation. Highlights its features and benefits.">
	<meta property="og:url" content="http://localhost:4000/dotnet/aspnetcore/2024/03/22/kiota-guide-introduction.html">
	<meta property="og:site_name" content="N+1 Blog">
	<meta property="og:type" content="article">
	
	<meta property="article:published_time" content="2024-03-22T00:00:00+02:00">
	
	<meta property="og:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@nikiforovall">
	<meta name="twitter:title" content="A Guide to OpenAPI Client Generation with Kiota. Introduction (Part 1)">
	<meta name="twitter:description" content="Introduces Kiota, explaining its purpose and relevance in the context of OpenAPI client generation. Highlights its features and benefits.">
	<meta name="twitter:image" content="http://localhost:4000/assets/media/default-post-image.png">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Search Feature Styles -->
	<style>
		.layout-page .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; gap: 10px; padding: 6px 12px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; min-width: 220px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; height: 34px; box-sizing: border-box; }
		.layout-post .search-trigger { position: fixed; top: 45px; right: 100px; z-index: 1000; display: flex; align-items: center; justify-content: center; padding: 0; background: #f5f5f5; border: 1px solid #ddd; border-radius: 4px; cursor: pointer; width: 34px; height: 34px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); transition: all 0.15s ease; box-sizing: border-box; }
		.search-trigger:hover { background: #ebebeb; border-color: #c0c0c0; box-shadow: 0 2px 5px rgba(0,0,0,0.08); }
		.search-icon { color: #666; font-size: 14px; display: flex; align-items: center; }
		.search-placeholder { flex: 1; color: #999; font-size: 14px; user-select: none; }
		.search-keybind { display: flex; gap: 4px; align-items: center; }
		.search-key { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 6px; background: #e0e0e0; border: 1px solid #ccc; border-bottom: 2px solid #bbb; border-radius: 3px; color: #333; line-height: 1.2; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		.layout-post .search-placeholder { display: none; }
		.layout-post .search-keybind { display: none; }
		.search-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 10000; display: none; align-items: flex-start; justify-content: center; padding-top: 10vh; }
		.search-modal.open { display: flex; animation: fadeIn 0.2s ease; }
		@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
		.search-backdrop { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); backdrop-filter: blur(2px); }
		.search-modal-container { position: relative; width: 90%; max-width: 600px; background: white; border-radius: 8px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
		.search-input-container { display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #e0e0e0; gap: 12px; }
		.search-modal-icon { color: #666; font-size: 18px; }
		.search-modal-input { flex: 1; border: none; outline: none; font-size: 16px; color: #333; background: transparent; }
		.search-modal-input::placeholder { color: #999; }
		.search-close-btn { background: transparent; border: none; color: #999; font-size: 18px; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: all 0.15s ease; }
		.search-close-btn:hover { background: #f0f0f0; color: #333; }
		.search-results { max-height: 60vh; overflow-y: auto; padding: 8px; }
		.search-hint { padding: 40px 20px; text-align: center; color: #999; font-size: 14px; }
		.search-result-item { padding: 12px 16px; border-radius: 6px; cursor: pointer; transition: background-color 0.15s ease; border: 2px solid transparent; margin-bottom: 4px; }
		.search-result-item:hover { background: #f5f5f5; }
		.search-result-item.selected { background: #e8f4f8; border-color: #4a90e2; }
		.search-footer { display: flex; justify-content: center; gap: 20px; padding: 12px 20px; border-top: 1px solid #e0e0e0; background: #fafafa; font-size: 12px; color: #666; }
		.search-footer kbd { font-family: 'Courier New', monospace; font-size: 11px; padding: 2px 5px; background: white; border: 1px solid #ddd; border-radius: 3px; color: #333; box-shadow: 0 1px 1px rgba(0,0,0,0.1); }
		@media (max-width: 768px) { .layout-page .search-trigger, .layout-post .search-trigger { display: none; } .search-modal { padding-top: 5vh; } .search-modal-container { width: 95%; max-width: none; margin: 0 10px; } .search-results { max-height: 50vh; } .search-footer { flex-wrap: wrap; gap: 10px; } }
	</style>

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->
	<link rel="shortcut icon" href="/assets/media/favicon.ico">

	<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

	
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "A Guide to OpenAPI Client Generation with Kiota. Introduction (Part 1)",
  
  
  "description": "Introduces Kiota, explaining its purpose and relevance in the context of OpenAPI client generation. Highlights its features and benefits.",
  
  "image": ["http://localhost:4000/assets/media/default-post-image.png"],
  "datePublished": "2024-03-22T00:00:00+02:00",
  "dateModified": "2024-03-22T00:00:00+02:00",
  "author": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "url": "http://localhost:4000/about.html",
    "sameAs": [
      "https://github.com/nikiforovAll",
      "https://twitter.com/nikiforovall",
      "https://www.linkedin.com/in/nikiforov-oleksii",
      "https://t.me/nikiforovallblog"
    ]
  },
  "publisher": {
    "@type": "Person",
    "name": "Oleksii Nikiforov",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=200"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:4000/dotnet/aspnetcore/2024/03/22/kiota-guide-introduction.html"
  },
  
  "articleSection": "dotnet",
  
  
  "keywords": "dotnet, aspnetcore, openapi, aspire, cli",
  
  "inLanguage": "en-US"
}
</script>


</head>

<body class="layout-post">
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="http://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter"></i>
			</a>
			
			
			<a type="button" class="navbar-toggle nav-link" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope"></i>
			</a>
			
			<a class="navbar-brand" href="/">
				<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=35" class="img-circle">
				N+1 Blog
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/topics.html">Topics</a></li>
				<li><a href="/about.html">About</a></li>
			</ul>
		</div>
<!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa-solid fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa-solid fa-home"></i>Home</a></li>
			<li><a href="/topics.html"><i class="fa-solid fa-bookmark"></i>Topics</a></li>
			<li><a href="/about.html"><i class="fa-solid fa-pencil"></i>About</a></li>
			<li class="divider">
			<li><a href="#"><i class="fa-solid fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<!-- Search Control -->
	<button id="search-trigger" class="search-trigger" type="button" aria-label="Open search">
		<span class="search-icon"><i class="fa-solid fa-search"></i></span>
		<span class="search-placeholder">Search</span>
		<div class="search-keybind">
			<kbd class="search-key" id="search-modifier">ctrl</kbd>
			<kbd class="search-key">K</kbd>
		</div>
	</button>

	<!-- Search Modal -->
	<div id="search-modal" class="search-modal">
		<div class="search-backdrop"></div>
		<div class="search-modal-container">
			<div class="search-input-container">
				<i class="fa-solid fa-search search-modal-icon"></i>
				<input type="text" id="search-input" class="search-modal-input" placeholder="Search blog posts..." autocomplete="off">
				<button id="search-close" class="search-close-btn" title="Close (ESC)">
					<i class="fa-solid fa-times"></i>
				</button>
			</div>
			<div id="search-results" class="search-results">
				<div class="search-hint">Type at least 2 characters to search...</div>
			</div>
			<div class="search-footer">
				<span><kbd>‚Üë</kbd> <kbd>‚Üì</kbd> to navigate</span>
				<span><kbd>‚Üµ</kbd> to select</span>
				<span><kbd>ESC</kbd> to close</span>
			</div>
		</div>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/" class="profile-link">
		<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011?s=150" class="img-circle profile-image">
		<div class="profile-accent"></div>
	</a>
	<h3 class="title">
        <a href="/">N+1 Blog</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Jibber-jabbering about programming and IT.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/nikiforovAll" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-github fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://x.com/nikiforovall" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://t.me/nikiforovallblog" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-telegram fa-xl"></i>
			</a>
		</li>
		
		
		<li>
			<a class="btn btn-default btn-sm" href="https://linkedin.com/in/nikiforov-oleksii" target="_blank" rel="noopener noreferrer noopener noreferrer">
				<i class="fa-brands fa-linkedin fa-xl"></i>
			</a>
		</li>
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="mailto:alexey.nikiforovall@gmail.com">
				<i class="fa-solid fa-envelope fa-xl"></i>
			</a>
		</li>
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml" target="_blank" rel="noopener noreferrer">
				<i class="fa-solid fa-rss fa-xl"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
	<h1>A Guide to OpenAPI Client Generation with Kiota. Introduction (Part 1) </h1>
</div>
<article>

	<div class="col-sm-10">

		<span class="post-date">
			
			March
			22nd,
			
			2024
		</span>

	
	
	
	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/aspire/2024/06/28/startup-dependencies-aspire.html">Managing Startup Dependencies in .NET Aspire <span class="label label-default">dotnet</span>  <span class="label label-default">aspnetcore</span>  <span class="label label-default">aspire</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/aspire/2024/06/18/polyglot-persistance-with-aspire.html">Learn .NET Aspire by example: Polyglot persistence featuring PostgreSQL, Redis, MongoDB, and Elasticsearch <span class="label label-default">dotnet</span>  <span class="label label-default">aspnetcore</span>  <span class="label label-default">aspire</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/opentelemetry/2024/06/12/developer-guide-to-xunit-otel.html">A .NET Developer Guide to XUnit Test Instrumentation with OpenTelemetry and Aspire Dashboard <span class="label label-default">dotnet</span>  <span class="label label-default">aspnetcore</span>  <span class="label label-default">aspire</span> </a></h5>
	</div>
	
	
	

	

	
	

	

	
	<div>
		<h5><a href="/dotnet/opentelemetry/2024/06/07/test-instrumentation-with-otel-aspire.html">Automated Tests instrumentation via OpenTelemetry and Aspire Dashboard <span class="label label-default">dotnet</span>  <span class="label label-default">aspnetcore</span>  <span class="label label-default">aspire</span> </a></h5>
	</div>
	
	
	
	

	<div class="article_body" style="margin-top: 30px;">
		<blockquote>
  <p>Source code: <a href="https://github.com/NikiforovAll/kiota-getting-started" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/kiota-getting-started</a></p>
</blockquote>

<h2 id="introduction">Introduction</h2>

<p><strong>Kiota</strong> is a powerful command line tool developed by <strong>Microsoft</strong> that simplifies the process of generating <strong>API clients</strong> for calling any <strong>OpenAPI-described API</strong>.</p>

<p>It gains traction, for example, GitHub teams decided to move away from the static landscape of the traditional Octokit, and now they are shipping SDKs using¬†Kiota (ref: <a href="https://github.blog/2024-01-03-our-move-to-generated-sdks/" target="_blank" rel="noopener noreferrer">github/Our move to generated SDKs</a>)</p>

<h3 id="purpose-and-goal">Purpose and Goal</h3>

<p><strong>Kiota</strong> aims to eliminate the need for developers to rely on different API SDKs for each API they interact with. So When you need to call multiple APIs, you can use <strong>Kiota</strong> to generate a consistent, strongly typed API client without having to learn a new library for every HTTP API.</p>

<h3 id="key-features">Key Features</h3>

<ul>
  <li>Language Agnostic: <strong>Kiota</strong> provides support for a wide range of languages, including C#, CLI, Go, Java, PHP, Python, Ruby, Swift, and TypeScript.</li>
  <li>Full OpenAPI Capabilities: It leverages the complete capabilities of OpenAPI descriptions.</li>
  <li>Minimal Code Generation: It generates only the necessary source code by building on a core library.</li>
  <li>Reduced External Dependencies: <strong>Kiota</strong> minimizes external dependencies.</li>
  <li>JSON Schema Integration: It uses JSON Schema descriptions to generate primitive-based model serialization and deserialization code.</li>
  <li>IDE Autocomplete: The generated code supports IDE autocomplete, aiding in API resource discovery.</li>
  <li>Full Access to HTTP Capabilities: Kiota ensures you have full access to HTTP features.</li>
  <li>Fine-Tuned Generation: Need only a specific part of the API? No problem. <strong>Kiota</strong> lets you filter the generation to the exact surface area you‚Äôre interested in.</li>
</ul>

<h2 id="use-kiota">Use Kiota</h2>

<p>Visit <a href="https://learn.microsoft.com/en-us/openapi/kiota/install" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/openapi/kiota/install</a> to see various installation options, in our case, we will use <code class="language-plaintext highlighter-rouge">dotnet global-tool</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet tool <span class="nb">install</span> <span class="nt">--global</span> Microsoft.OpenApi.Kiota
</code></pre></div></div>

<p>A noteworthy feature of the <strong>Kiota</strong> CLI is its endeavor to enhance discoverability by incorporating the search command <code class="language-plaintext highlighter-rouge">kiota search &lt;searchTerm&gt;</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kiota search news
<span class="c"># Key                                                     Title                           Description</span>
<span class="c"># apisguru::gov.bc.ca:news                                BC Gov News API Service 1.0     News API</span>
<span class="c"># apisguru::microsoft.com:cognitiveservices-NewsSearch    News Search Client              The News Search API lets you send a</span>
<span class="c"># apisguru::sportsdata.io:mlb-v3-rotoballer-premium-news  MLB v3 RotoBaller Premium News</span>
<span class="c"># apisguru::sportsdata.io:nba-v3-rotoballer-premium-news  NBA v3 RotoBaller Premium News</span>
<span class="c"># apisguru::sportsdata.io:nfl-v3-rotoballer-premium-news  NFL v3 RotoBaller Premium News</span>
</code></pre></div></div>

<p>Let‚Äôs say we want to know more about: <code class="language-plaintext highlighter-rouge">microsoft.com:cognitiveservices-NewsSearch</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kiota search apisguru::microsoft.com:cognitiveservices-NewsSearch
<span class="c"># Key: apisguru::microsoft.com:cognitiveservices-NewsSearch</span>
<span class="c"># Title: News Search Client</span>
<span class="c"># Description: The News Search API lets you send a search query to Bing and get back a list of news that are relevant to the search query. This section provides technical details about the query parameters and headers that you use to request news and the JSON response objects that contain them. For examples that show how to make requests, see [Searching the web for news](https://docs.microsoft.com/en-us/azure/cognitive-services/bing-news-search/search-the-web).</span>
<span class="c"># Service:</span>
<span class="c"># OpenAPI: https://raw.githubusercontent.com/APIs-guru/openapi-directory/gh-pages/v2/specs/microsoft.com/cognitiveservices-NewsSearch/1.0/swagger.json</span>
</code></pre></div></div>

<p>We can check structure of the API by using <code class="language-plaintext highlighter-rouge">kiota show</code> command, but first, we need to download OpenAPI specification.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kiota download apisguru::microsoft.com:cognitiveservices-NewsSearch <span class="se">\</span>
    <span class="nt">--output</span> ./src/NewsSearch.Sdk/OpenApi/NewsSearch.json
<span class="nv">$ </span>kiota show <span class="se">\</span>
    <span class="nt">--openapi</span> ./src/NewsSearch.Sdk/OpenApi/NewsSearch.json
<span class="c"># /</span>
<span class="c">#  ‚îî‚îÄnews</span>
<span class="c">#     ‚îú‚îÄsearch</span>
<span class="c">#     ‚îî‚îÄtrendingtopics</span>

<span class="c"># Hint: use the --include-path and --exclude-path options with glob patterns to filter the paths displayed.</span>
<span class="c"># Example: kiota show -d "C:\Users\Oleksii_Nikiforov\dev\kiota-getting-started\.\src\NewsSearch.Sdk\OpenApi\NewsSearch.json" --include-path "**/foo"</span>
</code></pre></div></div>

<h2 id="demo">Demo</h2>

<p>Now, we are ready to see how it works, but before we start I want to introduce you the demo application, note, it is intentionally complicated just to demonstrate various aspects of using <strong>Kiota</strong>:</p>

<p>We have an application (<code class="language-plaintext highlighter-rouge">App.Client</code>) that calls our application‚Äôs API (<code class="language-plaintext highlighter-rouge">App API</code>). This application integrates with the Bing REST API. The unique aspect of this demo is that every HTTP client is automatically generated based on OpenAPI and <strong>Kiota</strong>.</p>

<h3 id="components">Components</h3>

<p>As part of this post, we don‚Äôt need to know about all components. You will learn more in future blog posts. For this post, focus on components marked with üéØ.</p>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>üéØ<code class="language-plaintext highlighter-rouge">App</code>
</td>
      <td>Integrates with Bing REST API</td>
    </tr>
    <tr>
      <td>üéØ<code class="language-plaintext highlighter-rouge">NewsSearch.Sdk</code>
</td>
      <td>Generated OpenAPI HTTP Client by Kiota. It‚Äôs based on externally provided OpenAPI specification</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.Sdk</code></td>
      <td>Generated OpenAPI HTTP Client by Kiota</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.Client</code></td>
      <td>Invokes <code class="language-plaintext highlighter-rouge">App</code> via <code class="language-plaintext highlighter-rouge">App.Sdk</code>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.Client.Sdk</code></td>
      <td>Generated OpenAPI HTTP Client by Kiota</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.Client.Cli</code></td>
      <td>Generated CLI Client by Kiota. Convention-based commands based on App.Client OpenAPI specification</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.AppHost</code></td>
      <td>Aspire Host</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">App.ServiceDefaults</code></td>
      <td>Reasonable service defaults</td>
    </tr>
  </tbody>
</table>

<div class="mermaid">
graph LR
    App --&gt; NewsSearchSdk["NewsSearch.Sdk"]
    App --&gt; AppServiceDefaults["App.ServiceDefaults"]
    AppClient --&gt; AppSdk["App.Sdk"]
    AppClient["App.Client"] --&gt; AppServiceDefaults
    AppAppHost["App.AppHost"] --&gt; App
    AppAppHost --&gt; AppClient
</div>

<hr>

<p><strong>Our goal</strong> is to add an endpoint to fetch trending topics by Country Code.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">builder</span> <span class="p">=</span> <span class="n">WebApplication</span><span class="p">.</span><span class="nf">CreateBuilder</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">services</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">app</span> <span class="p">=</span> <span class="n">builder</span><span class="p">.</span><span class="nf">Build</span><span class="p">();</span>

<span class="n">app</span><span class="p">.</span><span class="nf">MapGet</span><span class="p">(</span><span class="s">"trending/{country:minlength(2):maxlength(2)}"</span><span class="p">,</span> <span class="p">(</span><span class="kt">string</span><span class="p">?</span> <span class="n">country</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="c1">// TODO:</span>
<span class="p">});</span>

<span class="n">app</span><span class="p">.</span><span class="nf">Run</span><span class="p">();</span>
</code></pre></div></div>

<h3 id="generate-client">Generate Client</h3>

<p>So, first, we need to generate the client SDK based on OpenApi specification stored previously. Note, <code class="language-plaintext highlighter-rouge">--class-name</code> parameter specifies the name of the generated client - <code class="language-plaintext highlighter-rouge">NewsSearchApiClient</code>.</p>

<p>üí° As mentioned earlier, <strong>Kiota</strong> supports partial client generation by using <code class="language-plaintext highlighter-rouge">--include-path</code> option.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kiota generate <span class="nt">-l</span> CSharp <span class="se">\</span>
    <span class="nt">--log-level</span> trace <span class="se">\</span>
    <span class="nt">--output</span> ./src/NewsSearch.Sdk <span class="se">\</span>
    <span class="nt">--namespace-name</span> NewsSearch.Sdk <span class="se">\</span>
    <span class="nt">--class-name</span> NewsSearchApiClient <span class="se">\</span>
    <span class="nt">--include-path</span> <span class="s2">"**/trendingtopics"</span> <span class="se">\</span>
    <span class="nt">--exclude-backward-compatible</span> <span class="se">\</span>
    <span class="nt">--openapi</span> ./src/NewsSearch.Sdk/OpenApi/NewsSearch.json
</code></pre></div></div>

<p>After that, we want to add required dependencies. Luckily, <strong>Kiota</strong> help with it by providing friendly instructions as part of <code class="language-plaintext highlighter-rouge">kiota info -l CSharp</code></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kiota info  <span class="nt">-l</span> CSharp
<span class="c"># The language CSharp is currently in Stable maturity level.</span>

<span class="c"># Hint: use the install command to install the dependencies.</span>
<span class="c"># Example:</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Abstractions --version 1.7.11</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Authentication.Azure --version 1.1.4</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Http.HttpClientLibrary --version 1.3.7</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Serialization.Form --version 1.1.5</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Serialization.Json --version 1.1.8</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Serialization.Multipart --version 1.1.3</span>
<span class="c">#    dotnet add package Microsoft.Kiota.Serialization.Text --version 1.1.4</span>
</code></pre></div></div>

<p>Here is how <code class="language-plaintext highlighter-rouge">NewsSearch.Sdk.csproj</code> looks like:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ItemGroup&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Abstractions"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Authentication.Azure"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Http.HttpClientLibrary"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Serialization.Form"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Serialization.Json"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Serialization.Multipart"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.Kiota.Serialization.Text"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/ItemGroup&gt;</span>
<span class="nt">&lt;/Project&gt;</span>
</code></pre></div></div>

<p>Add a project <code class="language-plaintext highlighter-rouge">NewsSearch.Sdk</code> reference to <code class="language-plaintext highlighter-rouge">App</code> and instantiate instance of <code class="language-plaintext highlighter-rouge">NewsSearchApiClient</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet add ./src/App reference ./src/NewsSearch.Sdk/
</code></pre></div></div>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">requestAdapter</span> <span class="p">=</span> <span class="n">Mock</span><span class="p">&lt;</span><span class="n">IRequestAdapter</span><span class="p">&gt;;</span>
<span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">NewsSearchApiClient</span><span class="p">(</span><span class="n">requestAdapter</span><span class="p">);</span>
</code></pre></div></div>

<p>The request adapter interface <code class="language-plaintext highlighter-rouge">IRequestAdapter</code> is the primary point where <strong>Kiota</strong> service libraries will trigger the creation of a HTTP request. The default implementation in .NET has the name <code class="language-plaintext highlighter-rouge">HttpClientRequestAdapter</code> and it takes <code class="language-plaintext highlighter-rouge">IAuthenticationProvider</code> as a dependency.</p>

<p>Most REST APIs are protected through some kind of authentication and authorization scheme. The default HTTP core services provided by <strong>Kiota</strong> require an authentication provider to be passed to handle authentication concerns.</p>

<p>NewsSearch API has ApiKey Authentication. We can use standard class <code class="language-plaintext highlighter-rouge">Microsoft.Kiota.Abstractions.Authentication.ApiKeyAuthenticationProvider</code></p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ApiKeyAuthenticationProvider</span> <span class="n">authenticationProvider</span> <span class="p">=</span> <span class="k">new</span> <span class="p">(</span>
    <span class="n">apiKey</span><span class="p">,</span> <span class="s">"Ocp-Apim-Subscription-Key"</span><span class="p">,</span> <span class="n">KeyLocation</span><span class="p">.</span><span class="n">Header</span><span class="p">);</span>

<span class="n">HttpClientRequestAdapter</span> <span class="n">requestAdapter</span> <span class="p">=</span> <span class="k">new</span> <span class="p">(</span><span class="n">authenticationProvider</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">BaseUrl</span> <span class="p">=</span> <span class="s">"https://api.bing.microsoft.com/v7.0"</span>
<span class="p">};</span>
</code></pre></div></div>

<p>Let‚Äôs put everything together:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">MapGet</span><span class="p">(</span>
    <span class="s">"trending/{country:minlength(2):maxlength(2)}"</span><span class="p">,</span>
    <span class="k">async</span> <span class="p">(</span><span class="n">IConfiguration</span> <span class="n">configuration</span><span class="p">,</span> <span class="kt">string</span><span class="p">?</span> <span class="n">country</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="n">ApiKeyAuthenticationProvider</span> <span class="n">authenticationProvider</span> <span class="p">=</span> <span class="k">new</span> <span class="p">(</span>
        <span class="n">configuration</span><span class="p">[</span><span class="s">"ApiKey"</span><span class="p">],</span> <span class="s">"Ocp-Apim-Subscription-Key"</span><span class="p">,</span> <span class="n">KeyLocation</span><span class="p">.</span><span class="n">Header</span><span class="p">);</span>

    <span class="n">HttpClientRequestAdapter</span> <span class="n">requestAdapter</span> <span class="p">=</span> <span class="k">new</span> <span class="p">(</span><span class="n">authenticationProvider</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">BaseUrl</span> <span class="p">=</span> <span class="s">"https://api.bing.microsoft.com/v7.0"</span>
    <span class="p">};</span>

    <span class="kt">var</span> <span class="n">client</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">NewsSearchApiClient</span><span class="p">(</span><span class="n">requestAdapter</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">response</span> <span class="p">=</span> <span class="k">await</span> <span class="n">client</span>
        <span class="p">.</span><span class="n">News</span>
        <span class="p">.</span><span class="n">Trendingtopics</span><span class="p">.</span><span class="nf">GetAsync</span><span class="p">(</span><span class="n">r</span> <span class="p">=&gt;</span> <span class="n">r</span><span class="p">.</span><span class="n">QueryParameters</span><span class="p">.</span><span class="n">Cc</span> <span class="p">=</span> <span class="n">country</span><span class="p">);</span>

    <span class="k">return</span> <span class="n">response</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Before we test it, we need to set ApiKey. Navigate to Azure portal and create resource of type <code class="language-plaintext highlighter-rouge">microsoft.bing/accounts</code> and copy ApiKey.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet user-secrets <span class="nt">--project</span> ./src/App <span class="nb">set </span>ApiKey <span class="s2">"&lt;key&gt;"</span>
</code></pre></div></div>

<p>Finally, we are ready to Run our demo:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dotnet run <span class="nt">--project</span> ./src/App
curl <span class="nt">-s</span> http://localhost:5103/trending/US | jq <span class="s1">'.value[].name'</span> | <span class="nb">head</span> <span class="nt">-3</span>
</code></pre></div></div>

<p><img src="/assets/kiota/demo1.png" alt="demo1"></p>

<p>The setup, as demonstrated, is quite straightforward. The hierarchical approach to the client builder is particularly commendable as it simplifies the discovery of REST APIs, making it intuitive and user-friendly.</p>

<h3 id="automatic-generation">Automatic Generation</h3>

<p>Since kiota ships as <code class="language-plaintext highlighter-rouge">dotnet global-tool</code> we can easily rely on it as dependency and therefore make it as part of build process. Here is how to build SDK client every time we build the project. This way we don‚Äôt need to use <strong>Kiota</strong> CLI everytime.</p>

<p>Add this to <code class="language-plaintext highlighter-rouge">NewsSearch.Sdk.csproj</code>:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;Target</span> <span class="na">Name=</span><span class="s">"GenerateClient"</span> <span class="na">AfterTargets=</span><span class="s">"Build"</span> <span class="na">Condition=</span><span class="s">"$(Configuration)=='Debug'"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Exec</span> <span class="na">Command=</span><span class="s">"dotnet kiota generate -l CSharp --output ./ --namespace-name NewsSearch.Sdk --class-name NewsSearchApiClient --include-path **/trendingtopics --exclude-backward-compatible --openapi ./OpenApi/NewsSearch.json"</span> <span class="na">WorkingDirectory=</span><span class="s">"$(ProjectDir)"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Target&gt;</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>

<p>In conclusion, this blog post has provided a comprehensive introduction to <strong>Kiota</strong>, a powerful tool developed by Microsoft for generating API clients. We‚Äôve learned how <strong>Kiota</strong> can simplify the process of interacting with multiple APIs by generating consistent, strongly typed API clients.</p>

<p>We‚Äôve also explored <strong>Kiota</strong>‚Äôs key features, including its language-agnostic nature, minimal code generation, reduced external dependencies, and full access to HTTP capabilities.</p>

<p>The post has demonstrated how to install and use <strong>Kiota</strong>, and provided a detailed walkthrough of generating a client SDK based on an OpenAPI specification. We‚Äôve seen how <strong>Kiota</strong> can enhance discoverability and how it can be integrated into an application to fetch trending topics from the Bing REST API.</p>

<p>Overall, <strong>Kiota</strong> is a promising tool that can significantly streamline the process of working with APIs, making it a valuable addition to any developer‚Äôs toolkit.</p>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://learn.microsoft.com/en-us/openapi/kiota/overview" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/openapi/kiota/overview</a></li>
  <li><a href="https://github.com/darrelmiller/KiotaApp" target="_blank" rel="noopener noreferrer">https://github.com/darrelmiller/KiotaApp</a></li>
  <li><a href="https://github.com/NikiforovAll/kiota-getting-started" target="_blank" rel="noopener noreferrer">https://github.com/NikiforovAll/kiota-getting-started</a></li>
</ul>

	</div>

	

	
	<ul class="list-inline">
		<li>
<i class="fa-solid fa-bookmark"></i> Topics:</li>
		
		
		
		<li>
			<a href="/topics.html#dotnet-cat-ref">
				dotnet <span>(58)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#aspnetcore-cat-ref">
				aspnetcore <span>(11)</span>
			</a>
			 ¬∑
		</li>
		
		
		
		
		
		<li>
			<a href="/topics.html#dotnet-tag-ref">
				dotnet <span>(63)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#aspnetcore-tag-ref">
				aspnetcore <span>(24)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#openapi-tag-ref">
				openapi <span>(4)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#aspire-tag-ref">
				aspire <span>(20)</span>
			</a>
			 ¬∑
		</li>
		
		<li>
			<a href="/topics.html#cli-tag-ref">
				cli <span>(9)</span>
			</a>
			
		</li>
		
		
		
	</ul>
	

	<hr>

	<div>
		<section class="share col-sm-6">
			<h4 class="section-title">Share Post</h4>
			<a class="btn btn-default btn-sm twitter" href="http://x.com/share?&amp;via=nikiforovall" onclick="window.open(this.href, 'x-share', 'width=550,height=235');return false;" target="_blank" rel="noopener noreferrer">
				<i class="fa-brands fa-x-twitter fa-lg"></i>
				X
			</a>
		</section>

		<section class="col-sm-6 author">
			<img src="//www.gravatar.com/avatar/e86fa0938976c38907a302ecb208f011" class="img-rounded author-image">
			<h4 class="section-title author-name">Oleksii Nikiforov</h4>
			<p class="author-bio">Jibber-jabbering about programming and IT.</p>
		</section>
	</div>

	<div class="clearfix"></div>

	<ul class="pager">
		
		<li class="previous"><a href="/dotnet/2023/05/19/federated-search-intro.html" title="Building a federated search engine from scratch. An introduction.">‚Üê
				Previous</a></li>
		
		
		<li class="next">
<a href="/dotnet/aspnetcore/2024/03/24/kiota-guide-deep-dive.html" title="A Guide to OpenAPI Client Generation with Kiota. Deep dive (Part 2)">Next ‚Üí</a>
		</li>
		
	</ul>

	<hr>
	</div>

	<div class="col-sm-2 sidebar-2">

	</div>

</article>
<div class="clearfix"></div>



    
    <script src="https://utteranc.es/client.js" repo="NikiforovAll/nikiforovall.github.io" issue-term="pathname" label="Blog" theme="preferred-color-scheme" crossorigin="anonymous" async>
    </script>





		<footer>
			<hr>
			<p>
				¬© 2026 Oleksii Nikiforov with <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll" target="_blank" rel="noopener noreferrer">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
	<script src="https://unpkg.com/lunr/lunr.js"></script>
	<script type="text/javascript" src="/assets/js/search.js"></script>
	
		<script type="text/javascript" src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js">
</script>
<script>
$(document).ready(function() {
    mermaid.initialize({
        theme: 'forest'
    });
});
</script>

	
</body>
</html>



<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-164555539-1', 'auto');
  ga('send', 'pageview');
</script>

